import{b9 as ts,ba as rs,bb as _t,bc as hr,b5 as vt,at as cr,aD as ns,g as eo,aA as Ve,b6 as Bn}from"./index-Qy8TeGxy.js";var is=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,kr=Math.ceil,qe=Math.floor,je="[BigNumber Error] ",$n=je+"Number primitive has more than 15 significant digits: ",Ke=1e14,pe=14,jr=9007199254740991,Wr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],st=1e7,Ne=1e9;function to(r){var e,t,n,o=f.prototype={constructor:f,toString:null,valueOf:null},c=new f(1),s=20,_=4,O=-7,T=21,D=-1e7,k=1e7,m=!1,U=1,B=0,C={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",u=!0;function f(i,g){var a,d,h,l,I,v,R,M,b=this;if(!(b instanceof f))return new f(i,g);if(g==null){if(i&&i._isBigNumber===!0){b.s=i.s,!i.c||i.e>k?b.c=b.e=null:i.e<D?b.c=[b.e=0]:(b.e=i.e,b.c=i.c.slice());return}if((v=typeof i=="number")&&i*0==0){if(b.s=1/i<0?(i=-i,-1):1,i===~~i){for(l=0,I=i;I>=10;I/=10,l++);l>k?b.c=b.e=null:(b.e=l,b.c=[i]);return}M=String(i)}else{if(!is.test(M=String(i)))return n(b,M,v);b.s=M.charCodeAt(0)==45?(M=M.slice(1),-1):1}(l=M.indexOf("."))>-1&&(M=M.replace(".","")),(I=M.search(/e/i))>0?(l<0&&(l=I),l+=+M.slice(I+1),M=M.substring(0,I)):l<0&&(l=M.length)}else{if(Re(g,2,A.length,"Base"),g==10&&u)return b=new f(i),se(b,s+b.e+1,_);if(M=String(i),v=typeof i=="number"){if(i*0!=0)return n(b,M,v,g);if(b.s=1/i<0?(M=M.slice(1),-1):1,f.DEBUG&&M.replace(/^0\.0*|\./,"").length>15)throw Error($n+i)}else b.s=M.charCodeAt(0)===45?(M=M.slice(1),-1):1;for(a=A.slice(0,g),l=I=0,R=M.length;I<R;I++)if(a.indexOf(d=M.charAt(I))<0){if(d=="."){if(I>l){l=R;continue}}else if(!h&&(M==M.toUpperCase()&&(M=M.toLowerCase())||M==M.toLowerCase()&&(M=M.toUpperCase()))){h=!0,I=-1,l=0;continue}return n(b,String(i),v,g)}v=!1,M=t(M,g,10,b.s),(l=M.indexOf("."))>-1?M=M.replace(".",""):l=M.length}for(I=0;M.charCodeAt(I)===48;I++);for(R=M.length;M.charCodeAt(--R)===48;);if(M=M.slice(I,++R)){if(R-=I,v&&f.DEBUG&&R>15&&(i>jr||i!==qe(i)))throw Error($n+b.s*i);if((l=l-I-1)>k)b.c=b.e=null;else if(l<D)b.c=[b.e=0];else{if(b.e=l,b.c=[],I=(l+1)%pe,l<0&&(I+=pe),I<R){for(I&&b.c.push(+M.slice(0,I)),R-=pe;I<R;)b.c.push(+M.slice(I,I+=pe));I=pe-(M=M.slice(I)).length}else I-=R;for(;I--;M+="0");b.c.push(+M)}}else b.c=[b.e=0]}f.clone=to,f.ROUND_UP=0,f.ROUND_DOWN=1,f.ROUND_CEIL=2,f.ROUND_FLOOR=3,f.ROUND_HALF_UP=4,f.ROUND_HALF_DOWN=5,f.ROUND_HALF_EVEN=6,f.ROUND_HALF_CEIL=7,f.ROUND_HALF_FLOOR=8,f.EUCLID=9,f.config=f.set=function(i){var g,a;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(g="DECIMAL_PLACES")&&(a=i[g],Re(a,0,Ne,g),s=a),i.hasOwnProperty(g="ROUNDING_MODE")&&(a=i[g],Re(a,0,8,g),_=a),i.hasOwnProperty(g="EXPONENTIAL_AT")&&(a=i[g],a&&a.pop?(Re(a[0],-Ne,0,g),Re(a[1],0,Ne,g),O=a[0],T=a[1]):(Re(a,-Ne,Ne,g),O=-(T=a<0?-a:a))),i.hasOwnProperty(g="RANGE"))if(a=i[g],a&&a.pop)Re(a[0],-Ne,-1,g),Re(a[1],1,Ne,g),D=a[0],k=a[1];else if(Re(a,-Ne,Ne,g),a)D=-(k=a<0?-a:a);else throw Error(je+g+" cannot be zero: "+a);if(i.hasOwnProperty(g="CRYPTO"))if(a=i[g],a===!!a)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))m=a;else throw m=!a,Error(je+"crypto unavailable");else m=a;else throw Error(je+g+" not true or false: "+a);if(i.hasOwnProperty(g="MODULO_MODE")&&(a=i[g],Re(a,0,9,g),U=a),i.hasOwnProperty(g="POW_PRECISION")&&(a=i[g],Re(a,0,Ne,g),B=a),i.hasOwnProperty(g="FORMAT"))if(a=i[g],typeof a=="object")C=a;else throw Error(je+g+" not an object: "+a);if(i.hasOwnProperty(g="ALPHABET"))if(a=i[g],typeof a=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(a))u=a.slice(0,10)=="0123456789",A=a;else throw Error(je+g+" invalid: "+a)}else throw Error(je+"Object expected: "+i);return{DECIMAL_PLACES:s,ROUNDING_MODE:_,EXPONENTIAL_AT:[O,T],RANGE:[D,k],CRYPTO:m,MODULO_MODE:U,POW_PRECISION:B,FORMAT:C,ALPHABET:A}},f.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!f.DEBUG)return!0;var g,a,d=i.c,h=i.e,l=i.s;e:if({}.toString.call(d)=="[object Array]"){if((l===1||l===-1)&&h>=-Ne&&h<=Ne&&h===qe(h)){if(d[0]===0){if(h===0&&d.length===1)return!0;break e}if(g=(h+1)%pe,g<1&&(g+=pe),String(d[0]).length==g){for(g=0;g<d.length;g++)if(a=d[g],a<0||a>=Ke||a!==qe(a))break e;if(a!==0)return!0}}}else if(d===null&&h===null&&(l===null||l===1||l===-1))return!0;throw Error(je+"Invalid BigNumber: "+i)},f.maximum=f.max=function(){return z(arguments,-1)},f.minimum=f.min=function(){return z(arguments,1)},f.random=(function(){var i=9007199254740992,g=Math.random()*i&2097151?function(){return qe(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(a){var d,h,l,I,v,R=0,M=[],b=new f(c);if(a==null?a=s:Re(a,0,Ne),I=kr(a/pe),m)if(crypto.getRandomValues){for(d=crypto.getRandomValues(new Uint32Array(I*=2));R<I;)v=d[R]*131072+(d[R+1]>>>11),v>=9e15?(h=crypto.getRandomValues(new Uint32Array(2)),d[R]=h[0],d[R+1]=h[1]):(M.push(v%1e14),R+=2);R=I/2}else if(crypto.randomBytes){for(d=crypto.randomBytes(I*=7);R<I;)v=(d[R]&31)*281474976710656+d[R+1]*1099511627776+d[R+2]*4294967296+d[R+3]*16777216+(d[R+4]<<16)+(d[R+5]<<8)+d[R+6],v>=9e15?crypto.randomBytes(7).copy(d,R):(M.push(v%1e14),R+=7);R=I/7}else throw m=!1,Error(je+"crypto unavailable");if(!m)for(;R<I;)v=g(),v<9e15&&(M[R++]=v%1e14);for(I=M[--R],a%=pe,I&&a&&(v=Wr[pe-a],M[R]=qe(I/v)*v);M[R]===0;M.pop(),R--);if(R<0)M=[l=0];else{for(l=-1;M[0]===0;M.splice(0,1),l-=pe);for(R=1,v=M[0];v>=10;v/=10,R++);R<pe&&(l-=pe-R)}return b.e=l,b.c=M,b}})(),f.sum=function(){for(var i=1,g=arguments,a=new f(g[0]);i<g.length;)a=a.plus(g[i++]);return a},t=(function(){var i="0123456789";function g(a,d,h,l){for(var I,v=[0],R,M=0,b=a.length;M<b;){for(R=v.length;R--;v[R]*=d);for(v[0]+=l.indexOf(a.charAt(M++)),I=0;I<v.length;I++)v[I]>h-1&&(v[I+1]==null&&(v[I+1]=0),v[I+1]+=v[I]/h|0,v[I]%=h)}return v.reverse()}return function(a,d,h,l,I){var v,R,M,b,j,w,F,Y,W=a.indexOf("."),re=s,Z=_;for(W>=0&&(b=B,B=0,a=a.replace(".",""),Y=new f(d),w=Y.pow(a.length-W),B=b,Y.c=g(et(Ue(w.c),w.e,"0"),10,h,i),Y.e=Y.c.length),F=g(a,d,h,I?(v=A,i):(v=i,A)),M=b=F.length;F[--b]==0;F.pop());if(!F[0])return v.charAt(0);if(W<0?--M:(w.c=F,w.e=M,w.s=l,w=e(w,Y,re,Z,h),F=w.c,j=w.r,M=w.e),R=M+re+1,W=F[R],b=h/2,j=j||R<0||F[R+1]!=null,j=Z<4?(W!=null||j)&&(Z==0||Z==(w.s<0?3:2)):W>b||W==b&&(Z==4||j||Z==6&&F[R-1]&1||Z==(w.s<0?8:7)),R<1||!F[0])a=j?et(v.charAt(1),-re,v.charAt(0)):v.charAt(0);else{if(F.length=R,j)for(--h;++F[--R]>h;)F[R]=0,R||(++M,F=[1].concat(F));for(b=F.length;!F[--b];);for(W=0,a="";W<=b;a+=v.charAt(F[W++]));a=et(a,M,v.charAt(0))}return a}})(),e=(function(){function i(d,h,l){var I,v,R,M,b=0,j=d.length,w=h%st,F=h/st|0;for(d=d.slice();j--;)R=d[j]%st,M=d[j]/st|0,I=F*R+M*w,v=w*R+I%st*st+b,b=(v/l|0)+(I/st|0)+F*M,d[j]=v%l;return b&&(d=[b].concat(d)),d}function g(d,h,l,I){var v,R;if(l!=I)R=l>I?1:-1;else for(v=R=0;v<l;v++)if(d[v]!=h[v]){R=d[v]>h[v]?1:-1;break}return R}function a(d,h,l,I){for(var v=0;l--;)d[l]-=v,v=d[l]<h[l]?1:0,d[l]=v*I+d[l]-h[l];for(;!d[0]&&d.length>1;d.splice(0,1));}return function(d,h,l,I,v){var R,M,b,j,w,F,Y,W,re,Z,ae,le,H,V,oe,ue,ce,N=d.s==h.s?1:-1,L=d.c,q=h.c;if(!L||!L[0]||!q||!q[0])return new f(!d.s||!h.s||(L?q&&L[0]==q[0]:!q)?NaN:L&&L[0]==0||!q?N*0:N/0);for(W=new f(N),re=W.c=[],M=d.e-h.e,N=l+M+1,v||(v=Ke,M=Be(d.e/pe)-Be(h.e/pe),N=N/pe|0),b=0;q[b]==(L[b]||0);b++);if(q[b]>(L[b]||0)&&M--,N<0)re.push(1),j=!0;else{for(V=L.length,ue=q.length,b=0,N+=2,w=qe(v/(q[0]+1)),w>1&&(q=i(q,w,v),L=i(L,w,v),ue=q.length,V=L.length),H=ue,Z=L.slice(0,ue),ae=Z.length;ae<ue;Z[ae++]=0);ce=q.slice(),ce=[0].concat(ce),oe=q[0],q[1]>=v/2&&oe++;do{if(w=0,R=g(q,Z,ue,ae),R<0){if(le=Z[0],ue!=ae&&(le=le*v+(Z[1]||0)),w=qe(le/oe),w>1)for(w>=v&&(w=v-1),F=i(q,w,v),Y=F.length,ae=Z.length;g(F,Z,Y,ae)==1;)w--,a(F,ue<Y?ce:q,Y,v),Y=F.length,R=1;else w==0&&(R=w=1),F=q.slice(),Y=F.length;if(Y<ae&&(F=[0].concat(F)),a(Z,F,ae,v),ae=Z.length,R==-1)for(;g(q,Z,ue,ae)<1;)w++,a(Z,ue<ae?ce:q,ae,v),ae=Z.length}else R===0&&(w++,Z=[0]);re[b++]=w,Z[0]?Z[ae++]=L[H]||0:(Z=[L[H]],ae=1)}while((H++<V||Z[0]!=null)&&N--);j=Z[0]!=null,re[0]||re.splice(0,1)}if(v==Ke){for(b=1,N=re[0];N>=10;N/=10,b++);se(W,l+(W.e=b+M*pe-1)+1,I,j)}else W.e=M,W.r=+j;return W}})();function S(i,g,a,d){var h,l,I,v,R;if(a==null?a=_:Re(a,0,8),!i.c)return i.toString();if(h=i.c[0],I=i.e,g==null)R=Ue(i.c),R=d==1||d==2&&(I<=O||I>=T)?er(R,I):et(R,I,"0");else if(i=se(new f(i),g,a),l=i.e,R=Ue(i.c),v=R.length,d==1||d==2&&(g<=l||l<=O)){for(;v<g;R+="0",v++);R=er(R,l)}else if(g-=I+(d===2&&l>I),R=et(R,l,"0"),l+1>v){if(--g>0)for(R+=".";g--;R+="0");}else if(g+=l-v,g>0)for(l+1==v&&(R+=".");g--;R+="0");return i.s<0&&h?"-"+R:R}function z(i,g){for(var a,d,h=1,l=new f(i[0]);h<i.length;h++)d=new f(i[h]),(!d.s||(a=ht(l,d))===g||a===0&&l.s===g)&&(l=d);return l}function G(i,g,a){for(var d=1,h=g.length;!g[--h];g.pop());for(h=g[0];h>=10;h/=10,d++);return(a=d+a*pe-1)>k?i.c=i.e=null:a<D?i.c=[i.e=0]:(i.e=a,i.c=g),i}n=(function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,g=/^([^.]+)\.$/,a=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(l,I,v,R){var M,b=v?I:I.replace(h,"");if(d.test(b))l.s=isNaN(b)?null:b<0?-1:1;else{if(!v&&(b=b.replace(i,function(j,w,F){return M=(F=F.toLowerCase())=="x"?16:F=="b"?2:8,!R||R==M?w:j}),R&&(M=R,b=b.replace(g,"$1").replace(a,"0.$1")),I!=b))return new f(b,M);if(f.DEBUG)throw Error(je+"Not a"+(R?" base "+R:"")+" number: "+I);l.s=null}l.c=l.e=null}})();function se(i,g,a,d){var h,l,I,v,R,M,b,j=i.c,w=Wr;if(j){e:{for(h=1,v=j[0];v>=10;v/=10,h++);if(l=g-h,l<0)l+=pe,I=g,R=j[M=0],b=qe(R/w[h-I-1]%10);else if(M=kr((l+1)/pe),M>=j.length)if(d){for(;j.length<=M;j.push(0));R=b=0,h=1,l%=pe,I=l-pe+1}else break e;else{for(R=v=j[M],h=1;v>=10;v/=10,h++);l%=pe,I=l-pe+h,b=I<0?0:qe(R/w[h-I-1]%10)}if(d=d||g<0||j[M+1]!=null||(I<0?R:R%w[h-I-1]),d=a<4?(b||d)&&(a==0||a==(i.s<0?3:2)):b>5||b==5&&(a==4||d||a==6&&(l>0?I>0?R/w[h-I]:0:j[M-1])%10&1||a==(i.s<0?8:7)),g<1||!j[0])return j.length=0,d?(g-=i.e+1,j[0]=w[(pe-g%pe)%pe],i.e=-g||0):j[0]=i.e=0,i;if(l==0?(j.length=M,v=1,M--):(j.length=M+1,v=w[pe-l],j[M]=I>0?qe(R/w[h-I]%w[I])*v:0),d)for(;;)if(M==0){for(l=1,I=j[0];I>=10;I/=10,l++);for(I=j[0]+=v,v=1;I>=10;I/=10,v++);l!=v&&(i.e++,j[0]==Ke&&(j[0]=1));break}else{if(j[M]+=v,j[M]!=Ke)break;j[M--]=0,v=1}for(l=j.length;j[--l]===0;j.pop());}i.e>k?i.c=i.e=null:i.e<D&&(i.c=[i.e=0])}return i}function he(i){var g,a=i.e;return a===null?i.toString():(g=Ue(i.c),g=a<=O||a>=T?er(g,a):et(g,a,"0"),i.s<0?"-"+g:g)}return o.absoluteValue=o.abs=function(){var i=new f(this);return i.s<0&&(i.s=1),i},o.comparedTo=function(i,g){return ht(this,new f(i,g))},o.decimalPlaces=o.dp=function(i,g){var a,d,h,l=this;if(i!=null)return Re(i,0,Ne),g==null?g=_:Re(g,0,8),se(new f(l),i+l.e+1,g);if(!(a=l.c))return null;if(d=((h=a.length-1)-Be(this.e/pe))*pe,h=a[h])for(;h%10==0;h/=10,d--);return d<0&&(d=0),d},o.dividedBy=o.div=function(i,g){return e(this,new f(i,g),s,_)},o.dividedToIntegerBy=o.idiv=function(i,g){return e(this,new f(i,g),0,1)},o.exponentiatedBy=o.pow=function(i,g){var a,d,h,l,I,v,R,M,b,j=this;if(i=new f(i),i.c&&!i.isInteger())throw Error(je+"Exponent not an integer: "+he(i));if(g!=null&&(g=new f(g)),v=i.e>14,!j.c||!j.c[0]||j.c[0]==1&&!j.e&&j.c.length==1||!i.c||!i.c[0])return b=new f(Math.pow(+he(j),v?i.s*(2-Zt(i)):+he(i))),g?b.mod(g):b;if(R=i.s<0,g){if(g.c?!g.c[0]:!g.s)return new f(NaN);d=!R&&j.isInteger()&&g.isInteger(),d&&(j=j.mod(g))}else{if(i.e>9&&(j.e>0||j.e<-1||(j.e==0?j.c[0]>1||v&&j.c[1]>=24e7:j.c[0]<8e13||v&&j.c[0]<=9999975e7)))return l=j.s<0&&Zt(i)?-0:0,j.e>-1&&(l=1/l),new f(R?1/l:l);B&&(l=kr(B/pe+2))}for(v?(a=new f(.5),R&&(i.s=1),M=Zt(i)):(h=Math.abs(+he(i)),M=h%2),b=new f(c);;){if(M){if(b=b.times(j),!b.c)break;l?b.c.length>l&&(b.c.length=l):d&&(b=b.mod(g))}if(h){if(h=qe(h/2),h===0)break;M=h%2}else if(i=i.times(a),se(i,i.e+1,1),i.e>14)M=Zt(i);else{if(h=+he(i),h===0)break;M=h%2}j=j.times(j),l?j.c&&j.c.length>l&&(j.c.length=l):d&&(j=j.mod(g))}return d?b:(R&&(b=c.div(b)),g?b.mod(g):l?se(b,B,_,I):b)},o.integerValue=function(i){var g=new f(this);return i==null?i=_:Re(i,0,8),se(g,g.e+1,i)},o.isEqualTo=o.eq=function(i,g){return ht(this,new f(i,g))===0},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(i,g){return ht(this,new f(i,g))>0},o.isGreaterThanOrEqualTo=o.gte=function(i,g){return(g=ht(this,new f(i,g)))===1||g===0},o.isInteger=function(){return!!this.c&&Be(this.e/pe)>this.c.length-2},o.isLessThan=o.lt=function(i,g){return ht(this,new f(i,g))<0},o.isLessThanOrEqualTo=o.lte=function(i,g){return(g=ht(this,new f(i,g)))===-1||g===0},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&this.c[0]==0},o.minus=function(i,g){var a,d,h,l,I=this,v=I.s;if(i=new f(i,g),g=i.s,!v||!g)return new f(NaN);if(v!=g)return i.s=-g,I.plus(i);var R=I.e/pe,M=i.e/pe,b=I.c,j=i.c;if(!R||!M){if(!b||!j)return b?(i.s=-g,i):new f(j?I:NaN);if(!b[0]||!j[0])return j[0]?(i.s=-g,i):new f(b[0]?I:_==3?-0:0)}if(R=Be(R),M=Be(M),b=b.slice(),v=R-M){for((l=v<0)?(v=-v,h=b):(M=R,h=j),h.reverse(),g=v;g--;h.push(0));h.reverse()}else for(d=(l=(v=b.length)<(g=j.length))?v:g,v=g=0;g<d;g++)if(b[g]!=j[g]){l=b[g]<j[g];break}if(l&&(h=b,b=j,j=h,i.s=-i.s),g=(d=j.length)-(a=b.length),g>0)for(;g--;b[a++]=0);for(g=Ke-1;d>v;){if(b[--d]<j[d]){for(a=d;a&&!b[--a];b[a]=g);--b[a],b[d]+=Ke}b[d]-=j[d]}for(;b[0]==0;b.splice(0,1),--M);return b[0]?G(i,b,M):(i.s=_==3?-1:1,i.c=[i.e=0],i)},o.modulo=o.mod=function(i,g){var a,d,h=this;return i=new f(i,g),!h.c||!i.s||i.c&&!i.c[0]?new f(NaN):!i.c||h.c&&!h.c[0]?new f(h):(U==9?(d=i.s,i.s=1,a=e(h,i,0,3),i.s=d,a.s*=d):a=e(h,i,0,U),i=h.minus(a.times(i)),!i.c[0]&&U==1&&(i.s=h.s),i)},o.multipliedBy=o.times=function(i,g){var a,d,h,l,I,v,R,M,b,j,w,F,Y,W,re,Z=this,ae=Z.c,le=(i=new f(i,g)).c;if(!ae||!le||!ae[0]||!le[0])return!Z.s||!i.s||ae&&!ae[0]&&!le||le&&!le[0]&&!ae?i.c=i.e=i.s=null:(i.s*=Z.s,!ae||!le?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(d=Be(Z.e/pe)+Be(i.e/pe),i.s*=Z.s,R=ae.length,j=le.length,R<j&&(Y=ae,ae=le,le=Y,h=R,R=j,j=h),h=R+j,Y=[];h--;Y.push(0));for(W=Ke,re=st,h=j;--h>=0;){for(a=0,w=le[h]%re,F=le[h]/re|0,I=R,l=h+I;l>h;)M=ae[--I]%re,b=ae[I]/re|0,v=F*M+b*w,M=w*M+v%re*re+Y[l]+a,a=(M/W|0)+(v/re|0)+F*b,Y[l--]=M%W;Y[l]=a}return a?++d:Y.splice(0,1),G(i,Y,d)},o.negated=function(){var i=new f(this);return i.s=-i.s||null,i},o.plus=function(i,g){var a,d=this,h=d.s;if(i=new f(i,g),g=i.s,!h||!g)return new f(NaN);if(h!=g)return i.s=-g,d.minus(i);var l=d.e/pe,I=i.e/pe,v=d.c,R=i.c;if(!l||!I){if(!v||!R)return new f(h/0);if(!v[0]||!R[0])return R[0]?i:new f(v[0]?d:h*0)}if(l=Be(l),I=Be(I),v=v.slice(),h=l-I){for(h>0?(I=l,a=R):(h=-h,a=v),a.reverse();h--;a.push(0));a.reverse()}for(h=v.length,g=R.length,h-g<0&&(a=R,R=v,v=a,g=h),h=0;g;)h=(v[--g]=v[g]+R[g]+h)/Ke|0,v[g]=Ke===v[g]?0:v[g]%Ke;return h&&(v=[h].concat(v),++I),G(i,v,I)},o.precision=o.sd=function(i,g){var a,d,h,l=this;if(i!=null&&i!==!!i)return Re(i,1,Ne),g==null?g=_:Re(g,0,8),se(new f(l),i,g);if(!(a=l.c))return null;if(h=a.length-1,d=h*pe+1,h=a[h]){for(;h%10==0;h/=10,d--);for(h=a[0];h>=10;h/=10,d++);}return i&&l.e+1>d&&(d=l.e+1),d},o.shiftedBy=function(i){return Re(i,-jr,jr),this.times("1e"+i)},o.squareRoot=o.sqrt=function(){var i,g,a,d,h,l=this,I=l.c,v=l.s,R=l.e,M=s+4,b=new f("0.5");if(v!==1||!I||!I[0])return new f(!v||v<0&&(!I||I[0])?NaN:I?l:1/0);if(v=Math.sqrt(+he(l)),v==0||v==1/0?(g=Ue(I),(g.length+R)%2==0&&(g+="0"),v=Math.sqrt(+g),R=Be((R+1)/2)-(R<0||R%2),v==1/0?g="5e"+R:(g=v.toExponential(),g=g.slice(0,g.indexOf("e")+1)+R),a=new f(g)):a=new f(v+""),a.c[0]){for(R=a.e,v=R+M,v<3&&(v=0);;)if(h=a,a=b.times(h.plus(e(l,h,M,1))),Ue(h.c).slice(0,v)===(g=Ue(a.c)).slice(0,v))if(a.e<R&&--v,g=g.slice(v-3,v+1),g=="9999"||!d&&g=="4999"){if(!d&&(se(h,h.e+s+2,0),h.times(h).eq(l))){a=h;break}M+=4,v+=4,d=1}else{(!+g||!+g.slice(1)&&g.charAt(0)=="5")&&(se(a,a.e+s+2,1),i=!a.times(a).eq(l));break}}return se(a,a.e+s+1,_,i)},o.toExponential=function(i,g){return i!=null&&(Re(i,0,Ne),i++),S(this,i,g,1)},o.toFixed=function(i,g){return i!=null&&(Re(i,0,Ne),i=i+this.e+1),S(this,i,g)},o.toFormat=function(i,g,a){var d,h=this;if(a==null)i!=null&&g&&typeof g=="object"?(a=g,g=null):i&&typeof i=="object"?(a=i,i=g=null):a=C;else if(typeof a!="object")throw Error(je+"Argument not an object: "+a);if(d=h.toFixed(i,g),h.c){var l,I=d.split("."),v=+a.groupSize,R=+a.secondaryGroupSize,M=a.groupSeparator||"",b=I[0],j=I[1],w=h.s<0,F=w?b.slice(1):b,Y=F.length;if(R&&(l=v,v=R,R=l,Y-=l),v>0&&Y>0){for(l=Y%v||v,b=F.substr(0,l);l<Y;l+=v)b+=M+F.substr(l,v);R>0&&(b+=M+F.slice(l)),w&&(b="-"+b)}d=j?b+(a.decimalSeparator||"")+((R=+a.fractionGroupSize)?j.replace(new RegExp("\\d{"+R+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):j):b}return(a.prefix||"")+d+(a.suffix||"")},o.toFraction=function(i){var g,a,d,h,l,I,v,R,M,b,j,w,F=this,Y=F.c;if(i!=null&&(v=new f(i),!v.isInteger()&&(v.c||v.s!==1)||v.lt(c)))throw Error(je+"Argument "+(v.isInteger()?"out of range: ":"not an integer: ")+he(v));if(!Y)return new f(F);for(g=new f(c),M=a=new f(c),d=R=new f(c),w=Ue(Y),l=g.e=w.length-F.e-1,g.c[0]=Wr[(I=l%pe)<0?pe+I:I],i=!i||v.comparedTo(g)>0?l>0?g:M:v,I=k,k=1/0,v=new f(w),R.c[0]=0;b=e(v,g,0,1),h=a.plus(b.times(d)),h.comparedTo(i)!=1;)a=d,d=h,M=R.plus(b.times(h=M)),R=h,g=v.minus(b.times(h=g)),v=h;return h=e(i.minus(a),d,0,1),R=R.plus(h.times(M)),a=a.plus(h.times(d)),R.s=M.s=F.s,l=l*2,j=e(M,d,l,_).minus(F).abs().comparedTo(e(R,a,l,_).minus(F).abs())<1?[M,d]:[R,a],k=I,j},o.toNumber=function(){return+he(this)},o.toPrecision=function(i,g){return i!=null&&Re(i,1,Ne),S(this,i,g,2)},o.toString=function(i){var g,a=this,d=a.s,h=a.e;return h===null?d?(g="Infinity",d<0&&(g="-"+g)):g="NaN":(i==null?g=h<=O||h>=T?er(Ue(a.c),h):et(Ue(a.c),h,"0"):i===10&&u?(a=se(new f(a),s+h+1,_),g=et(Ue(a.c),a.e,"0")):(Re(i,2,A.length,"Base"),g=t(et(Ue(a.c),h,"0"),10,i,d,!0)),d<0&&a.c[0]&&(g="-"+g)),g},o.valueOf=o.toJSON=function(){return he(this)},o._isBigNumber=!0,o[Symbol.toStringTag]="BigNumber",o[Symbol.for("nodejs.util.inspect.custom")]=o.valueOf,r!=null&&f.set(r),f}function Be(r){var e=r|0;return r>0||r===e?e:e-1}function Ue(r){for(var e,t,n=1,o=r.length,c=r[0]+"";n<o;){for(e=r[n++]+"",t=pe-e.length;t--;e="0"+e);c+=e}for(o=c.length;c.charCodeAt(--o)===48;);return c.slice(0,o+1||1)}function ht(r,e){var t,n,o=r.c,c=e.c,s=r.s,_=e.s,O=r.e,T=e.e;if(!s||!_)return null;if(t=o&&!o[0],n=c&&!c[0],t||n)return t?n?0:-_:s;if(s!=_)return s;if(t=s<0,n=O==T,!o||!c)return n?0:!o^t?1:-1;if(!n)return O>T^t?1:-1;for(_=(O=o.length)<(T=c.length)?O:T,s=0;s<_;s++)if(o[s]!=c[s])return o[s]>c[s]^t?1:-1;return O==T?0:O>T^t?1:-1}function Re(r,e,t,n){if(r<e||r>t||r!==qe(r))throw Error(je+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Zt(r){var e=r.c.length-1;return Be(r.e/pe)==e&&r.c[e]%2!=0}function er(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function et(r,e,t){var n,o;if(e<0){for(o=t+".";++e;o+=t);r=o+r}else if(n=r.length,++e>n){for(o=t,e-=n;--e;o+=t);r+=o}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}to();var Fr={},Hn;function os(){if(Hn)return Fr;Hn=1;var r=ts().Buffer,e=r.isEncoding||function(u){switch(u=""+u,u&&u.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(u){if(!u)return"utf8";for(var f;;)switch(u){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return u;default:if(f)return;u=(""+u).toLowerCase(),f=!0}}function n(u){var f=t(u);if(typeof f!="string"&&(r.isEncoding===e||!e(u)))throw new Error("Unknown encoding: "+u);return f||u}Fr.StringDecoder=o;function o(u){this.encoding=n(u);var f;switch(this.encoding){case"utf16le":this.text=k,this.end=m,f=4;break;case"utf8":this.fillLast=O,f=4;break;case"base64":this.text=U,this.end=B,f=3;break;default:this.write=C,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(f)}o.prototype.write=function(u){if(u.length===0)return"";var f,S;if(this.lastNeed){if(f=this.fillLast(u),f===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<u.length?f?f+this.text(u,S):this.text(u,S):f||""},o.prototype.end=D,o.prototype.text=T,o.prototype.fillLast=function(u){if(this.lastNeed<=u.length)return u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,this.lastTotal-this.lastNeed,0,u.length),this.lastNeed-=u.length};function c(u){return u<=127?0:u>>5===6?2:u>>4===14?3:u>>3===30?4:u>>6===2?-1:-2}function s(u,f,S){var z=f.length-1;if(z<S)return 0;var G=c(f[z]);return G>=0?(G>0&&(u.lastNeed=G-1),G):--z<S||G===-2?0:(G=c(f[z]),G>=0?(G>0&&(u.lastNeed=G-2),G):--z<S||G===-2?0:(G=c(f[z]),G>=0?(G>0&&(G===2?G=0:u.lastNeed=G-3),G):0))}function _(u,f,S){if((f[0]&192)!==128)return u.lastNeed=0,"�";if(u.lastNeed>1&&f.length>1){if((f[1]&192)!==128)return u.lastNeed=1,"�";if(u.lastNeed>2&&f.length>2&&(f[2]&192)!==128)return u.lastNeed=2,"�"}}function O(u){var f=this.lastTotal-this.lastNeed,S=_(this,u);if(S!==void 0)return S;if(this.lastNeed<=u.length)return u.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);u.copy(this.lastChar,f,0,u.length),this.lastNeed-=u.length}function T(u,f){var S=s(this,u,f);if(!this.lastNeed)return u.toString("utf8",f);this.lastTotal=S;var z=u.length-(S-this.lastNeed);return u.copy(this.lastChar,0,z),u.toString("utf8",f,z)}function D(u){var f=u&&u.length?this.write(u):"";return this.lastNeed?f+"�":f}function k(u,f){if((u.length-f)%2===0){var S=u.toString("utf16le",f);if(S){var z=S.charCodeAt(S.length-1);if(z>=55296&&z<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=u[u.length-1],u.toString("utf16le",f,u.length-1)}function m(u){var f=u&&u.length?this.write(u):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return f+this.lastChar.toString("utf16le",0,S)}return f}function U(u,f){var S=(u.length-f)%3;return S===0?u.toString("base64",f):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=u[u.length-1]:(this.lastChar[0]=u[u.length-2],this.lastChar[1]=u[u.length-1]),u.toString("base64",f,u.length-S))}function B(u){var f=u&&u.length?this.write(u):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function C(u){return u.toString(this.encoding)}function A(u){return u&&u.length?this.write(u):""}return Fr}const ss={},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),ls=rs(as);function kt(r){"@babel/helpers - typeof";return kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(r)}function us(r,e){if(kt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(kt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function fs(r){var e=us(r,"string");return kt(e)=="symbol"?e:e+""}function ge(r,e,t){return(e=fs(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zn(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function $e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(t),!0).forEach(function(n){ge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zn(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ur={exports:{}},qr={exports:{}},Br,Gn;function Te(){if(Gn)return Br;Gn=1;class r extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let o=0;o<t.length;o++)n+=`    ${t[o].stack}
`;super(n),this.name="AggregateError",this.errors=t}}return Br={AggregateError:r,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},Br}var $r={exports:{}},Hr,Kn;function ro(){return Kn||(Kn=1,Hr={format(r,...e){return r.replace(/%([sdifj])/g,function(...[t,n]){const o=e.shift();return n==="f"?o.toFixed(6):n==="j"?JSON.stringify(o):n==="s"&&typeof o=="object"?`${o.constructor!==Object?o.constructor.name:""} {}`.trim():o.toString()})},inspect(r){switch(typeof r){case"string":if(r.includes("'"))if(r.includes('"')){if(!r.includes("`")&&!r.includes("${"))return`\`${r}\``}else return`"${r}"`;return`'${r}'`;case"number":return isNaN(r)?"NaN":Object.is(r,-0)?String(r):r;case"bigint":return`${String(r)}n`;case"boolean":case"undefined":return String(r);case"object":return"{}"}}}),Hr}var zr,Vn;function Me(){if(Vn)return zr;Vn=1;const{format:r,inspect:e}=ro(),{AggregateError:t}=Te(),n=globalThis.AggregateError||t,o=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,_="__node_internal_",O={};function T(A,u){if(!A)throw new O.ERR_INTERNAL_ASSERTION(u)}function D(A){let u="",f=A.length;const S=A[0]==="-"?1:0;for(;f>=S+4;f-=3)u=`_${A.slice(f-3,f)}${u}`;return`${A.slice(0,f)}${u}`}function k(A,u,f){if(typeof u=="function")return T(u.length<=f.length,`Code: ${A}; The provided arguments length (${f.length}) does not match the required ones (${u.length}).`),u(...f);const S=(u.match(/%[dfijoOs]/g)||[]).length;return T(S===f.length,`Code: ${A}; The provided arguments length (${f.length}) does not match the required ones (${S}).`),f.length===0?u:r(u,...f)}function m(A,u,f){f||(f=Error);class S extends f{constructor(...G){super(k(A,u,G))}toString(){return`${this.name} [${A}]: ${this.message}`}}Object.defineProperties(S.prototype,{name:{value:f.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${A}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),S.prototype.code=A,S.prototype[o]=!0,O[A]=S}function U(A){const u=_+A.name;return Object.defineProperty(A,"name",{value:u}),A}function B(A,u){if(A&&u&&A!==u){if(Array.isArray(u.errors))return u.errors.push(A),u;const f=new n([u,A],u.message);return f.code=u.code,f}return A||u}class C extends Error{constructor(u="The operation was aborted",f=void 0){if(f!==void 0&&typeof f!="object")throw new O.ERR_INVALID_ARG_TYPE("options","Object",f);super(u,f),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(A,u,f)=>{T(typeof A=="string","'name' must be a string"),Array.isArray(u)||(u=[u]);let S="The ";A.endsWith(" argument")?S+=`${A} `:S+=`"${A}" ${A.includes(".")?"property":"argument"} `,S+="must be ";const z=[],G=[],se=[];for(const i of u)T(typeof i=="string","All expected entries have to be of type string"),c.includes(i)?z.push(i.toLowerCase()):s.test(i)?G.push(i):(T(i!=="object",'The value "object" should be written as "Object"'),se.push(i));if(G.length>0){const i=z.indexOf("object");i!==-1&&(z.splice(z,i,1),G.push("Object"))}if(z.length>0){switch(z.length){case 1:S+=`of type ${z[0]}`;break;case 2:S+=`one of type ${z[0]} or ${z[1]}`;break;default:{const i=z.pop();S+=`one of type ${z.join(", ")}, or ${i}`}}(G.length>0||se.length>0)&&(S+=" or ")}if(G.length>0){switch(G.length){case 1:S+=`an instance of ${G[0]}`;break;case 2:S+=`an instance of ${G[0]} or ${G[1]}`;break;default:{const i=G.pop();S+=`an instance of ${G.join(", ")}, or ${i}`}}se.length>0&&(S+=" or ")}switch(se.length){case 0:break;case 1:se[0].toLowerCase()!==se[0]&&(S+="an "),S+=`${se[0]}`;break;case 2:S+=`one of ${se[0]} or ${se[1]}`;break;default:{const i=se.pop();S+=`one of ${se.join(", ")}, or ${i}`}}if(f==null)S+=`. Received ${f}`;else if(typeof f=="function"&&f.name)S+=`. Received function ${f.name}`;else if(typeof f=="object"){var he;if((he=f.constructor)!==null&&he!==void 0&&he.name)S+=`. Received an instance of ${f.constructor.name}`;else{const i=e(f,{depth:-1});S+=`. Received ${i}`}}else{let i=e(f,{colors:!1});i.length>25&&(i=`${i.slice(0,25)}...`),S+=`. Received type ${typeof f} (${i})`}return S},TypeError),m("ERR_INVALID_ARG_VALUE",(A,u,f="is invalid")=>{let S=e(u);return S.length>128&&(S=S.slice(0,128)+"..."),`The ${A.includes(".")?"property":"argument"} '${A}' ${f}. Received ${S}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(A,u,f)=>{var S;const z=f!=null&&(S=f.constructor)!==null&&S!==void 0&&S.name?`instance of ${f.constructor.name}`:`type ${typeof f}`;return`Expected ${A} to be returned from the "${u}" function but got ${z}.`},TypeError),m("ERR_MISSING_ARGS",(...A)=>{T(A.length>0,"At least one arg needs to be specified");let u;const f=A.length;switch(A=(Array.isArray(A)?A:[A]).map(S=>`"${S}"`).join(" or "),f){case 1:u+=`The ${A[0]} argument`;break;case 2:u+=`The ${A[0]} and ${A[1]} arguments`;break;default:{const S=A.pop();u+=`The ${A.join(", ")}, and ${S} arguments`}break}return`${u} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(A,u,f)=>{T(u,'Missing "range" argument');let S;if(Number.isInteger(f)&&Math.abs(f)>2**32)S=D(String(f));else if(typeof f=="bigint"){S=String(f);const z=BigInt(2)**BigInt(32);(f>z||f<-z)&&(S=D(S)),S+="n"}else S=e(f);return`The value of "${A}" is out of range. It must be ${u}. Received ${S}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),zr={AbortError:C,aggregateTwoErrors:U(B),hideStackFrames:U,codes:O},zr}var Ct={exports:{}},Jn;function jt(){if(Jn)return Ct.exports;Jn=1;const{AbortController:r,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Ct.exports=r,Ct.exports.AbortSignal=e,Ct.exports.default=r,Ct.exports}var Yn;function We(){return Yn||(Yn=1,(function(r){const e=_t(),{format:t,inspect:n}=ro(),{codes:{ERR_INVALID_ARG_TYPE:o}}=Me(),{kResistStopPropagation:c,AggregateError:s,SymbolDispose:_}=Te(),O=globalThis.AbortSignal||jt().AbortSignal,T=globalThis.AbortController||jt().AbortController,D=Object.getPrototypeOf(async function(){}).constructor,k=globalThis.Blob||e.Blob,m=typeof k<"u"?function(A){return A instanceof k}:function(A){return!1},U=(C,A)=>{if(C!==void 0&&(C===null||typeof C!="object"||!("aborted"in C)))throw new o(A,"AbortSignal",C)},B=(C,A)=>{if(typeof C!="function")throw new o(A,"Function",C)};r.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(C){let A=!1;return function(...u){A||(A=!0,C.apply(this,u))}},createDeferredPromise:function(){let C,A;return{promise:new Promise((f,S)=>{C=f,A=S}),resolve:C,reject:A}},promisify(C){return new Promise((A,u)=>{C((f,...S)=>f?u(f):A(...S))})},debuglog(){return function(){}},format:t,inspect:n,types:{isAsyncFunction(C){return C instanceof D},isArrayBufferView(C){return ArrayBuffer.isView(C)}},isBlob:m,deprecate(C,A){return C},addAbortListener:hr().addAbortListener||function(A,u){if(A===void 0)throw new o("signal","AbortSignal",A);U(A,"signal"),B(u,"listener");let f;return A.aborted?queueMicrotask(()=>u()):(A.addEventListener("abort",u,{__proto__:null,once:!0,[c]:!0}),f=()=>{A.removeEventListener("abort",u)}),{__proto__:null,[_](){var S;(S=f)===null||S===void 0||S()}}},AbortSignalAny:O.any||function(A){if(A.length===1)return A[0];const u=new T,f=()=>u.abort();return A.forEach(S=>{U(S,"signals"),S.addEventListener("abort",f,{once:!0})}),u.signal.addEventListener("abort",()=>{A.forEach(S=>S.removeEventListener("abort",f))},{once:!0}),u.signal}},r.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})($r)),$r.exports}var tr={},Gr,Xn;function Wt(){if(Xn)return Gr;Xn=1;const{ArrayIsArray:r,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:t,ArrayPrototypeMap:n,NumberIsInteger:o,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:_,NumberParseInt:O,ObjectPrototypeHasOwnProperty:T,RegExpPrototypeExec:D,String:k,StringPrototypeToUpperCase:m,StringPrototypeTrim:U}=Te(),{hideStackFrames:B,codes:{ERR_SOCKET_BAD_PORT:C,ERR_INVALID_ARG_TYPE:A,ERR_INVALID_ARG_VALUE:u,ERR_OUT_OF_RANGE:f,ERR_UNKNOWN_SIGNAL:S}}=Me(),{normalizeEncoding:z}=We(),{isAsyncFunction:G,isArrayBufferView:se}=We().types,he={};function i(P){return P===(P|0)}function g(P){return P===P>>>0}const a=/^[0-7]+$/,d="must be a 32-bit unsigned integer or an octal string";function h(P,J,Q){if(typeof P>"u"&&(P=Q),typeof P=="string"){if(D(a,P)===null)throw new u(J,P,d);P=O(P,8)}return v(P,J),P}const l=B((P,J,Q=_,K=s)=>{if(typeof P!="number")throw new A(J,"number",P);if(!o(P))throw new f(J,"an integer",P);if(P<Q||P>K)throw new f(J,`>= ${Q} && <= ${K}`,P)}),I=B((P,J,Q=-2147483648,K=2147483647)=>{if(typeof P!="number")throw new A(J,"number",P);if(!o(P))throw new f(J,"an integer",P);if(P<Q||P>K)throw new f(J,`>= ${Q} && <= ${K}`,P)}),v=B((P,J,Q=!1)=>{if(typeof P!="number")throw new A(J,"number",P);if(!o(P))throw new f(J,"an integer",P);const K=Q?1:0,we=4294967295;if(P<K||P>we)throw new f(J,`>= ${K} && <= ${we}`,P)});function R(P,J){if(typeof P!="string")throw new A(J,"string",P)}function M(P,J,Q=void 0,K){if(typeof P!="number")throw new A(J,"number",P);if(Q!=null&&P<Q||K!=null&&P>K||(Q!=null||K!=null)&&c(P))throw new f(J,`${Q!=null?`>= ${Q}`:""}${Q!=null&&K!=null?" && ":""}${K!=null?`<= ${K}`:""}`,P)}const b=B((P,J,Q)=>{if(!e(Q,P)){const we="must be one of: "+t(n(Q,Ce=>typeof Ce=="string"?`'${Ce}'`:k(Ce)),", ");throw new u(J,P,we)}});function j(P,J){if(typeof P!="boolean")throw new A(J,"boolean",P)}function w(P,J,Q){return P==null||!T(P,J)?Q:P[J]}const F=B((P,J,Q=null)=>{const K=w(Q,"allowArray",!1),we=w(Q,"allowFunction",!1);if(!w(Q,"nullable",!1)&&P===null||!K&&r(P)||typeof P!="object"&&(!we||typeof P!="function"))throw new A(J,"Object",P)}),Y=B((P,J)=>{if(P!=null&&typeof P!="object"&&typeof P!="function")throw new A(J,"a dictionary",P)}),W=B((P,J,Q=0)=>{if(!r(P))throw new A(J,"Array",P);if(P.length<Q){const K=`must be longer than ${Q}`;throw new u(J,P,K)}});function re(P,J){W(P,J);for(let Q=0;Q<P.length;Q++)R(P[Q],`${J}[${Q}]`)}function Z(P,J){W(P,J);for(let Q=0;Q<P.length;Q++)j(P[Q],`${J}[${Q}]`)}function ae(P,J){W(P,J);for(let Q=0;Q<P.length;Q++){const K=P[Q],we=`${J}[${Q}]`;if(K==null)throw new A(we,"AbortSignal",K);ue(K,we)}}function le(P,J="signal"){if(R(P,J),he[P]===void 0)throw he[m(P)]!==void 0?new S(P+" (signals must use all capital letters)"):new S(P)}const H=B((P,J="buffer")=>{if(!se(P))throw new A(J,["Buffer","TypedArray","DataView"],P)});function V(P,J){const Q=z(J),K=P.length;if(Q==="hex"&&K%2!==0)throw new u("encoding",J,`is invalid for data of length ${K}`)}function oe(P,J="Port",Q=!0){if(typeof P!="number"&&typeof P!="string"||typeof P=="string"&&U(P).length===0||+P!==+P>>>0||P>65535||P===0&&!Q)throw new C(J,P,Q);return P|0}const ue=B((P,J)=>{if(P!==void 0&&(P===null||typeof P!="object"||!("aborted"in P)))throw new A(J,"AbortSignal",P)}),ce=B((P,J)=>{if(typeof P!="function")throw new A(J,"Function",P)}),N=B((P,J)=>{if(typeof P!="function"||G(P))throw new A(J,"Function",P)}),L=B((P,J)=>{if(P!==void 0)throw new A(J,"undefined",P)});function q(P,J,Q){if(!e(Q,P))throw new A(J,`('${t(Q,"|")}')`,P)}const ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function te(P,J){if(typeof P>"u"||!D(ne,P))throw new u(J,P,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ee(P){if(typeof P=="string")return te(P,"hints"),P;if(r(P)){const J=P.length;let Q="";if(J===0)return Q;for(let K=0;K<J;K++){const we=P[K];te(we,"hints"),Q+=we,K!==J-1&&(Q+=", ")}return Q}throw new u("hints",P,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Gr={isInt32:i,isUint32:g,parseFileMode:h,validateArray:W,validateStringArray:re,validateBooleanArray:Z,validateAbortSignalArray:ae,validateBoolean:j,validateBuffer:H,validateDictionary:Y,validateEncoding:V,validateFunction:ce,validateInt32:I,validateInteger:l,validateNumber:M,validateObject:F,validateOneOf:b,validatePlainFunction:N,validatePort:oe,validateSignalName:le,validateString:R,validateUint32:v,validateUndefined:L,validateUnion:q,validateAbortSignal:ue,validateLinkHeaderValue:ee},Gr}var rr={exports:{}},Kr={},Qn;function bt(){return Qn||(Qn=1,(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(z){return z&&z.__esModule&&Object.prototype.hasOwnProperty.call(z,"default")?z.default:z}var t={exports:{}},n=t.exports={},o,c;function s(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=s}catch{o=s}try{typeof clearTimeout=="function"?c=clearTimeout:c=_}catch{c=_}})();function O(z){if(o===setTimeout)return setTimeout(z,0);if((o===s||!o)&&setTimeout)return o=setTimeout,setTimeout(z,0);try{return o(z,0)}catch{try{return o.call(null,z,0)}catch{return o.call(this,z,0)}}}function T(z){if(c===clearTimeout)return clearTimeout(z);if((c===_||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(z);try{return c(z)}catch{try{return c.call(null,z)}catch{return c.call(this,z)}}}var D=[],k=!1,m,U=-1;function B(){!k||!m||(k=!1,m.length?D=m.concat(D):U=-1,D.length&&C())}function C(){if(!k){var z=O(B);k=!0;for(var G=D.length;G;){for(m=D,D=[];++U<G;)m&&m[U].run();U=-1,G=D.length}m=null,k=!1,T(z)}}n.nextTick=function(z){var G=new Array(arguments.length-1);if(arguments.length>1)for(var se=1;se<arguments.length;se++)G[se-1]=arguments[se];D.push(new A(z,G)),D.length===1&&!k&&O(C)};function A(z,G){this.fun=z,this.array=G}A.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function u(){}n.on=u,n.addListener=u,n.once=u,n.off=u,n.removeListener=u,n.removeAllListeners=u,n.emit=u,n.prependListener=u,n.prependOnceListener=u,n.listeners=function(z){return[]},n.binding=function(z){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(z){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var f=t.exports;const S=e(f);r.default=S,r.process=S})(Kr)),Kr}var Vr,Zn;function it(){if(Zn)return Vr;Zn=1;const{SymbolAsyncIterator:r,SymbolIterator:e,SymbolFor:t}=Te(),n=t("nodejs.stream.destroyed"),o=t("nodejs.stream.errored"),c=t("nodejs.stream.readable"),s=t("nodejs.stream.writable"),_=t("nodejs.stream.disturbed"),O=t("nodejs.webstream.isClosedPromise"),T=t("nodejs.webstream.controllerErrorFunction");function D(w,F=!1){var Y;return!!(w&&typeof w.pipe=="function"&&typeof w.on=="function"&&(!F||typeof w.pause=="function"&&typeof w.resume=="function")&&(!w._writableState||((Y=w._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!w._writableState||w._readableState))}function k(w){var F;return!!(w&&typeof w.write=="function"&&typeof w.on=="function"&&(!w._readableState||((F=w._writableState)===null||F===void 0?void 0:F.writable)!==!1))}function m(w){return!!(w&&typeof w.pipe=="function"&&w._readableState&&typeof w.on=="function"&&typeof w.write=="function")}function U(w){return w&&(w._readableState||w._writableState||typeof w.write=="function"&&typeof w.on=="function"||typeof w.pipe=="function"&&typeof w.on=="function")}function B(w){return!!(w&&!U(w)&&typeof w.pipeThrough=="function"&&typeof w.getReader=="function"&&typeof w.cancel=="function")}function C(w){return!!(w&&!U(w)&&typeof w.getWriter=="function"&&typeof w.abort=="function")}function A(w){return!!(w&&!U(w)&&typeof w.readable=="object"&&typeof w.writable=="object")}function u(w){return B(w)||C(w)||A(w)}function f(w,F){return w==null?!1:F===!0?typeof w[r]=="function":F===!1?typeof w[e]=="function":typeof w[r]=="function"||typeof w[e]=="function"}function S(w){if(!U(w))return null;const F=w._writableState,Y=w._readableState,W=F||Y;return!!(w.destroyed||w[n]||W!=null&&W.destroyed)}function z(w){if(!k(w))return null;if(w.writableEnded===!0)return!0;const F=w._writableState;return F!=null&&F.errored?!1:typeof F?.ended!="boolean"?null:F.ended}function G(w,F){if(!k(w))return null;if(w.writableFinished===!0)return!0;const Y=w._writableState;return Y!=null&&Y.errored?!1:typeof Y?.finished!="boolean"?null:!!(Y.finished||F===!1&&Y.ended===!0&&Y.length===0)}function se(w){if(!D(w))return null;if(w.readableEnded===!0)return!0;const F=w._readableState;return!F||F.errored?!1:typeof F?.ended!="boolean"?null:F.ended}function he(w,F){if(!D(w))return null;const Y=w._readableState;return Y!=null&&Y.errored?!1:typeof Y?.endEmitted!="boolean"?null:!!(Y.endEmitted||F===!1&&Y.ended===!0&&Y.length===0)}function i(w){return w&&w[c]!=null?w[c]:typeof w?.readable!="boolean"?null:S(w)?!1:D(w)&&w.readable&&!he(w)}function g(w){return w&&w[s]!=null?w[s]:typeof w?.writable!="boolean"?null:S(w)?!1:k(w)&&w.writable&&!z(w)}function a(w,F){return U(w)?S(w)?!0:!(F?.readable!==!1&&i(w)||F?.writable!==!1&&g(w)):null}function d(w){var F,Y;return U(w)?w.writableErrored?w.writableErrored:(F=(Y=w._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&F!==void 0?F:null:null}function h(w){var F,Y;return U(w)?w.readableErrored?w.readableErrored:(F=(Y=w._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&F!==void 0?F:null:null}function l(w){if(!U(w))return null;if(typeof w.closed=="boolean")return w.closed;const F=w._writableState,Y=w._readableState;return typeof F?.closed=="boolean"||typeof Y?.closed=="boolean"?F?.closed||Y?.closed:typeof w._closed=="boolean"&&I(w)?w._closed:null}function I(w){return typeof w._closed=="boolean"&&typeof w._defaultKeepAlive=="boolean"&&typeof w._removedConnection=="boolean"&&typeof w._removedContLen=="boolean"}function v(w){return typeof w._sent100=="boolean"&&I(w)}function R(w){var F;return typeof w._consuming=="boolean"&&typeof w._dumped=="boolean"&&((F=w.req)===null||F===void 0?void 0:F.upgradeOrConnect)===void 0}function M(w){if(!U(w))return null;const F=w._writableState,Y=w._readableState,W=F||Y;return!W&&v(w)||!!(W&&W.autoDestroy&&W.emitClose&&W.closed===!1)}function b(w){var F;return!!(w&&((F=w[_])!==null&&F!==void 0?F:w.readableDidRead||w.readableAborted))}function j(w){var F,Y,W,re,Z,ae,le,H,V,oe;return!!(w&&((F=(Y=(W=(re=(Z=(ae=w[o])!==null&&ae!==void 0?ae:w.readableErrored)!==null&&Z!==void 0?Z:w.writableErrored)!==null&&re!==void 0?re:(le=w._readableState)===null||le===void 0?void 0:le.errorEmitted)!==null&&W!==void 0?W:(H=w._writableState)===null||H===void 0?void 0:H.errorEmitted)!==null&&Y!==void 0?Y:(V=w._readableState)===null||V===void 0?void 0:V.errored)!==null&&F!==void 0?F:!((oe=w._writableState)===null||oe===void 0)&&oe.errored))}return Vr={isDestroyed:S,kIsDestroyed:n,isDisturbed:b,kIsDisturbed:_,isErrored:j,kIsErrored:o,isReadable:i,kIsReadable:c,kIsClosedPromise:O,kControllerErrorFunction:T,kIsWritable:s,isClosed:l,isDuplexNodeStream:m,isFinished:a,isIterable:f,isReadableNodeStream:D,isReadableStream:B,isReadableEnded:se,isReadableFinished:he,isReadableErrored:h,isNodeStream:U,isWebStream:u,isWritable:g,isWritableNodeStream:k,isWritableStream:C,isWritableEnded:z,isWritableFinished:G,isWritableErrored:d,isServerRequest:R,isServerResponse:v,willEmitClose:M,isTransformStream:A},Vr}var ei;function ut(){if(ei)return rr.exports;ei=1;const r=bt(),{AbortError:e,codes:t}=Me(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:o}=t,{kEmptyObject:c,once:s}=We(),{validateAbortSignal:_,validateFunction:O,validateObject:T,validateBoolean:D}=Wt(),{Promise:k,PromisePrototypeThen:m,SymbolDispose:U}=Te(),{isClosed:B,isReadable:C,isReadableNodeStream:A,isReadableStream:u,isReadableFinished:f,isReadableErrored:S,isWritable:z,isWritableNodeStream:G,isWritableStream:se,isWritableFinished:he,isWritableErrored:i,isNodeStream:g,willEmitClose:a,kIsClosedPromise:d}=it();let h;function l(b){return b.setHeader&&typeof b.abort=="function"}const I=()=>{};function v(b,j,w){var F,Y;if(arguments.length===2?(w=j,j=c):j==null?j=c:T(j,"options"),O(w,"callback"),_(j.signal,"options.signal"),w=s(w),u(b)||se(b))return R(b,j,w);if(!g(b))throw new n("stream",["ReadableStream","WritableStream","Stream"],b);const W=(F=j.readable)!==null&&F!==void 0?F:A(b),re=(Y=j.writable)!==null&&Y!==void 0?Y:G(b),Z=b._writableState,ae=b._readableState,le=()=>{b.writable||oe()};let H=a(b)&&A(b)===W&&G(b)===re,V=he(b,!1);const oe=()=>{V=!0,b.destroyed&&(H=!1),!(H&&(!b.readable||W))&&(!W||ue)&&w.call(b)};let ue=f(b,!1);const ce=()=>{ue=!0,b.destroyed&&(H=!1),!(H&&(!b.writable||re))&&(!re||V)&&w.call(b)},N=P=>{w.call(b,P)};let L=B(b);const q=()=>{L=!0;const P=i(b)||S(b);if(P&&typeof P!="boolean")return w.call(b,P);if(W&&!ue&&A(b,!0)&&!f(b,!1))return w.call(b,new o);if(re&&!V&&!he(b,!1))return w.call(b,new o);w.call(b)},ne=()=>{L=!0;const P=i(b)||S(b);if(P&&typeof P!="boolean")return w.call(b,P);w.call(b)},te=()=>{b.req.on("finish",oe)};l(b)?(b.on("complete",oe),H||b.on("abort",q),b.req?te():b.on("request",te)):re&&!Z&&(b.on("end",le),b.on("close",le)),!H&&typeof b.aborted=="boolean"&&b.on("aborted",q),b.on("end",ce),b.on("finish",oe),j.error!==!1&&b.on("error",N),b.on("close",q),L?r.nextTick(q):Z!=null&&Z.errorEmitted||ae!=null&&ae.errorEmitted?H||r.nextTick(ne):(!W&&(!H||C(b))&&(V||z(b)===!1)||!re&&(!H||z(b))&&(ue||C(b)===!1)||ae&&b.req&&b.aborted)&&r.nextTick(ne);const ee=()=>{w=I,b.removeListener("aborted",q),b.removeListener("complete",oe),b.removeListener("abort",q),b.removeListener("request",te),b.req&&b.req.removeListener("finish",oe),b.removeListener("end",le),b.removeListener("close",le),b.removeListener("finish",oe),b.removeListener("end",ce),b.removeListener("error",N),b.removeListener("close",q)};if(j.signal&&!L){const P=()=>{const J=w;ee(),J.call(b,new e(void 0,{cause:j.signal.reason}))};if(j.signal.aborted)r.nextTick(P);else{h=h||We().addAbortListener;const J=h(j.signal,P),Q=w;w=s((...K)=>{J[U](),Q.apply(b,K)})}}return ee}function R(b,j,w){let F=!1,Y=I;if(j.signal)if(Y=()=>{F=!0,w.call(b,new e(void 0,{cause:j.signal.reason}))},j.signal.aborted)r.nextTick(Y);else{h=h||We().addAbortListener;const re=h(j.signal,Y),Z=w;w=s((...ae)=>{re[U](),Z.apply(b,ae)})}const W=(...re)=>{F||r.nextTick(()=>w.apply(b,re))};return m(b[d].promise,W,W),I}function M(b,j){var w;let F=!1;return j===null&&(j=c),(w=j)!==null&&w!==void 0&&w.cleanup&&(D(j.cleanup,"cleanup"),F=j.cleanup),new k((Y,W)=>{const re=v(b,j,Z=>{F&&re(),Z?W(Z):Y()})})}return rr.exports=v,rr.exports.finished=M,rr.exports}var Jr,ti;function St(){if(ti)return Jr;ti=1;const r=bt(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:t},AbortError:n}=Me(),{Symbol:o}=Te(),{kIsDestroyed:c,isDestroyed:s,isFinished:_,isServerRequest:O}=it(),T=o("kDestroy"),D=o("kConstruct");function k(a,d,h){a&&(a.stack,d&&!d.errored&&(d.errored=a),h&&!h.errored&&(h.errored=a))}function m(a,d){const h=this._readableState,l=this._writableState,I=l||h;return l!=null&&l.destroyed||h!=null&&h.destroyed?(typeof d=="function"&&d(),this):(k(a,l,h),l&&(l.destroyed=!0),h&&(h.destroyed=!0),I.constructed?U(this,a,d):this.once(T,function(v){U(this,e(v,a),d)}),this)}function U(a,d,h){let l=!1;function I(v){if(l)return;l=!0;const R=a._readableState,M=a._writableState;k(v,M,R),M&&(M.closed=!0),R&&(R.closed=!0),typeof h=="function"&&h(v),v?r.nextTick(B,a,v):r.nextTick(C,a)}try{a._destroy(d||null,I)}catch(v){I(v)}}function B(a,d){A(a,d),C(a)}function C(a){const d=a._readableState,h=a._writableState;h&&(h.closeEmitted=!0),d&&(d.closeEmitted=!0),(h!=null&&h.emitClose||d!=null&&d.emitClose)&&a.emit("close")}function A(a,d){const h=a._readableState,l=a._writableState;l!=null&&l.errorEmitted||h!=null&&h.errorEmitted||(l&&(l.errorEmitted=!0),h&&(h.errorEmitted=!0),a.emit("error",d))}function u(){const a=this._readableState,d=this._writableState;a&&(a.constructed=!0,a.closed=!1,a.closeEmitted=!1,a.destroyed=!1,a.errored=null,a.errorEmitted=!1,a.reading=!1,a.ended=a.readable===!1,a.endEmitted=a.readable===!1),d&&(d.constructed=!0,d.destroyed=!1,d.closed=!1,d.closeEmitted=!1,d.errored=null,d.errorEmitted=!1,d.finalCalled=!1,d.prefinished=!1,d.ended=d.writable===!1,d.ending=d.writable===!1,d.finished=d.writable===!1)}function f(a,d,h){const l=a._readableState,I=a._writableState;if(I!=null&&I.destroyed||l!=null&&l.destroyed)return this;l!=null&&l.autoDestroy||I!=null&&I.autoDestroy?a.destroy(d):d&&(d.stack,I&&!I.errored&&(I.errored=d),l&&!l.errored&&(l.errored=d),h?r.nextTick(A,a,d):A(a,d))}function S(a,d){if(typeof a._construct!="function")return;const h=a._readableState,l=a._writableState;h&&(h.constructed=!1),l&&(l.constructed=!1),a.once(D,d),!(a.listenerCount(D)>1)&&r.nextTick(z,a)}function z(a){let d=!1;function h(l){if(d){f(a,l??new t);return}d=!0;const I=a._readableState,v=a._writableState,R=v||I;I&&(I.constructed=!0),v&&(v.constructed=!0),R.destroyed?a.emit(T,l):l?f(a,l,!0):r.nextTick(G,a)}try{a._construct(l=>{r.nextTick(h,l)})}catch(l){r.nextTick(h,l)}}function G(a){a.emit(D)}function se(a){return a?.setHeader&&typeof a.abort=="function"}function he(a){a.emit("close")}function i(a,d){a.emit("error",d),r.nextTick(he,a)}function g(a,d){!a||s(a)||(!d&&!_(a)&&(d=new n),O(a)?(a.socket=null,a.destroy(d)):se(a)?a.abort():se(a.req)?a.req.abort():typeof a.destroy=="function"?a.destroy(d):typeof a.close=="function"?a.close():d?r.nextTick(i,a,d):r.nextTick(he,a),a.destroyed||(a[c]=!0))}return Jr={construct:S,destroyer:g,destroy:m,undestroy:u,errorOrDestroy:f},Jr}var Yr,ri;function Rn(){if(ri)return Yr;ri=1;const{ArrayIsArray:r,ObjectSetPrototypeOf:e}=Te(),{EventEmitter:t}=hr();function n(c){t.call(this,c)}e(n.prototype,t.prototype),e(n,t),n.prototype.pipe=function(c,s){const _=this;function O(C){c.writable&&c.write(C)===!1&&_.pause&&_.pause()}_.on("data",O);function T(){_.readable&&_.resume&&_.resume()}c.on("drain",T),!c._isStdio&&(!s||s.end!==!1)&&(_.on("end",k),_.on("close",m));let D=!1;function k(){D||(D=!0,c.end())}function m(){D||(D=!0,typeof c.destroy=="function"&&c.destroy())}function U(C){B(),t.listenerCount(this,"error")===0&&this.emit("error",C)}o(_,"error",U),o(c,"error",U);function B(){_.removeListener("data",O),c.removeListener("drain",T),_.removeListener("end",k),_.removeListener("close",m),_.removeListener("error",U),c.removeListener("error",U),_.removeListener("end",B),_.removeListener("close",B),c.removeListener("close",B)}return _.on("end",B),_.on("close",B),c.on("close",B),c.emit("pipe",_),c};function o(c,s,_){if(typeof c.prependListener=="function")return c.prependListener(s,_);!c._events||!c._events[s]?c.on(s,_):r(c._events[s])?c._events[s].unshift(_):c._events[s]=[_,c._events[s]]}return Yr={Stream:n,prependListener:o},Yr}var Xr={exports:{}},ni;function gr(){return ni||(ni=1,(function(r){const{SymbolDispose:e}=Te(),{AbortError:t,codes:n}=Me(),{isNodeStream:o,isWebStream:c,kControllerErrorFunction:s}=it(),_=ut(),{ERR_INVALID_ARG_TYPE:O}=n;let T;const D=(k,m)=>{if(typeof k!="object"||!("aborted"in k))throw new O(m,"AbortSignal",k)};r.exports.addAbortSignal=function(m,U){if(D(m,"signal"),!o(U)&&!c(U))throw new O("stream",["ReadableStream","WritableStream","Stream"],U);return r.exports.addAbortSignalNoValidate(m,U)},r.exports.addAbortSignalNoValidate=function(k,m){if(typeof k!="object"||!("aborted"in k))return m;const U=o(m)?()=>{m.destroy(new t(void 0,{cause:k.reason}))}:()=>{m[s](new t(void 0,{cause:k.reason}))};if(k.aborted)U();else{T=T||We().addAbortListener;const B=T(k,U);_(m,B[e])}return m}})(Xr)),Xr.exports}var Qr,ii;function cs(){if(ii)return Qr;ii=1;const{StringPrototypeSlice:r,SymbolIterator:e,TypedArrayPrototypeSet:t,Uint8Array:n}=Te(),{Buffer:o}=_t(),{inspect:c}=We();return Qr=class{constructor(){this.head=null,this.tail=null,this.length=0}push(_){const O={data:_,next:null};this.length>0?this.tail.next=O:this.head=O,this.tail=O,++this.length}unshift(_){const O={data:_,next:this.head};this.length===0&&(this.tail=O),this.head=O,++this.length}shift(){if(this.length===0)return;const _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}clear(){this.head=this.tail=null,this.length=0}join(_){if(this.length===0)return"";let O=this.head,T=""+O.data;for(;(O=O.next)!==null;)T+=_+O.data;return T}concat(_){if(this.length===0)return o.alloc(0);const O=o.allocUnsafe(_>>>0);let T=this.head,D=0;for(;T;)t(O,T.data,D),D+=T.data.length,T=T.next;return O}consume(_,O){const T=this.head.data;if(_<T.length){const D=T.slice(0,_);return this.head.data=T.slice(_),D}return _===T.length?this.shift():O?this._getString(_):this._getBuffer(_)}first(){return this.head.data}*[e](){for(let _=this.head;_;_=_.next)yield _.data}_getString(_){let O="",T=this.head,D=0;do{const k=T.data;if(_>k.length)O+=k,_-=k.length;else{_===k.length?(O+=k,++D,T.next?this.head=T.next:this.head=this.tail=null):(O+=r(k,0,_),this.head=T,T.data=r(k,_));break}++D}while((T=T.next)!==null);return this.length-=D,O}_getBuffer(_){const O=o.allocUnsafe(_),T=_;let D=this.head,k=0;do{const m=D.data;if(_>m.length)t(O,m,T-_),_-=m.length;else{_===m.length?(t(O,m,T-_),++k,D.next?this.head=D.next:this.head=this.tail=null):(t(O,new n(m.buffer,m.byteOffset,_),T-_),this.head=D,D.data=m.slice(_));break}++k}while((D=D.next)!==null);return this.length-=k,O}[Symbol.for("nodejs.util.inspect.custom")](_,O){return c(this,{...O,depth:0,customInspect:!1})}},Qr}var Zr,oi;function pr(){if(oi)return Zr;oi=1;const{MathFloor:r,NumberIsInteger:e}=Te(),{validateInteger:t}=Wt(),{ERR_INVALID_ARG_VALUE:n}=Me().codes;let o=16*1024,c=16;function s(D,k,m){return D.highWaterMark!=null?D.highWaterMark:k?D[m]:null}function _(D){return D?c:o}function O(D,k){t(k,"value",0),D?c=k:o=k}function T(D,k,m,U){const B=s(k,U,m);if(B!=null){if(!e(B)||B<0){const C=U?`options.${m}`:"options.highWaterMark";throw new n(C,B)}return r(B)}return _(D.objectMode)}return Zr={getHighWaterMark:T,getDefaultHighWaterMark:_,setDefaultHighWaterMark:O},Zr}var en,si;function no(){if(si)return en;si=1;const r=bt(),{PromisePrototypeThen:e,SymbolAsyncIterator:t,SymbolIterator:n}=Te(),{Buffer:o}=_t(),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:s}=Me().codes;function _(O,T,D){let k;if(typeof T=="string"||T instanceof o)return new O({objectMode:!0,...D,read(){this.push(T),this.push(null)}});let m;if(T&&T[t])m=!0,k=T[t]();else if(T&&T[n])m=!1,k=T[n]();else throw new c("iterable",["Iterable"],T);const U=new O({objectMode:!0,highWaterMark:1,...D});let B=!1;U._read=function(){B||(B=!0,A())},U._destroy=function(u,f){e(C(u),()=>r.nextTick(f,u),S=>r.nextTick(f,S||u))};async function C(u){const f=u!=null,S=typeof k.throw=="function";if(f&&S){const{value:z,done:G}=await k.throw(u);if(await z,G)return}if(typeof k.return=="function"){const{value:z}=await k.return();await z}}async function A(){for(;;){try{const{value:u,done:f}=m?await k.next():k.next();if(f)U.push(null);else{const S=u&&typeof u.then=="function"?await u:u;if(S===null)throw B=!1,new s;if(U.push(S))continue;B=!1}}catch(u){U.destroy(u)}break}}return U}return en=_,en}var tn,ai;function wr(){if(ai)return tn;ai=1;const r=bt(),{ArrayPrototypeIndexOf:e,NumberIsInteger:t,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:c,ObjectKeys:s,ObjectSetPrototypeOf:_,Promise:O,SafeSet:T,SymbolAsyncDispose:D,SymbolAsyncIterator:k,Symbol:m}=Te();tn=K,K.ReadableState=Q;const{EventEmitter:U}=hr(),{Stream:B,prependListener:C}=Rn(),{Buffer:A}=_t(),{addAbortSignal:u}=gr(),f=ut();let S=We().debuglog("stream",p=>{S=p});const z=cs(),G=St(),{getHighWaterMark:se,getDefaultHighWaterMark:he}=pr(),{aggregateTwoErrors:i,codes:{ERR_INVALID_ARG_TYPE:g,ERR_METHOD_NOT_IMPLEMENTED:a,ERR_OUT_OF_RANGE:d,ERR_STREAM_PUSH_AFTER_EOF:h,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:l},AbortError:I}=Me(),{validateObject:v}=Wt(),R=m("kPaused"),{StringDecoder:M}=os(),b=no();_(K.prototype,B.prototype),_(K,B);const j=()=>{},{errorOrDestroy:w}=G,F=1,Y=2,W=4,re=8,Z=16,ae=32,le=64,H=128,V=256,oe=512,ue=1024,ce=2048,N=4096,L=8192,q=16384,ne=32768,te=65536,ee=1<<17,P=1<<18;function J(p){return{enumerable:!1,get(){return(this.state&p)!==0},set(E){E?this.state|=p:this.state&=~p}}}c(Q.prototype,{objectMode:J(F),ended:J(Y),endEmitted:J(W),reading:J(re),constructed:J(Z),sync:J(ae),needReadable:J(le),emittedReadable:J(H),readableListening:J(V),resumeScheduled:J(oe),errorEmitted:J(ue),emitClose:J(ce),autoDestroy:J(N),destroyed:J(L),closed:J(q),closeEmitted:J(ne),multiAwaitDrain:J(te),readingMore:J(ee),dataEmitted:J(P)});function Q(p,E,X){typeof X!="boolean"&&(X=E instanceof nt()),this.state=ce|N|Z|ae,p&&p.objectMode&&(this.state|=F),X&&p&&p.readableObjectMode&&(this.state|=F),this.highWaterMark=p?se(this,p,"readableHighWaterMark",X):he(!1),this.buffer=new z,this.length=0,this.pipes=[],this.flowing=null,this[R]=null,p&&p.emitClose===!1&&(this.state&=~ce),p&&p.autoDestroy===!1&&(this.state&=~N),this.errored=null,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,p&&p.encoding&&(this.decoder=new M(p.encoding),this.encoding=p.encoding)}function K(p){if(!(this instanceof K))return new K(p);const E=this instanceof nt();this._readableState=new Q(p,this,E),p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&!E&&u(p.signal,this)),B.call(this,p),G.construct(this,()=>{this._readableState.needReadable&&Le(this,this._readableState)})}K.prototype.destroy=G.destroy,K.prototype._undestroy=G.undestroy,K.prototype._destroy=function(p,E){E(p)},K.prototype[U.captureRejectionSymbol]=function(p){this.destroy(p)},K.prototype[D]=function(){let p;return this.destroyed||(p=this.readableEnded?null:new I,this.destroy(p)),new O((E,X)=>f(this,ie=>ie&&ie!==p?X(ie):E(null)))},K.prototype.push=function(p,E){return we(this,p,E,!1)},K.prototype.unshift=function(p,E){return we(this,p,E,!0)};function we(p,E,X,ie){S("readableAddChunk",E);const fe=p._readableState;let Oe;if((fe.state&F)===0&&(typeof E=="string"?(X=X||fe.defaultEncoding,fe.encoding!==X&&(ie&&fe.encoding?E=A.from(E,X).toString(fe.encoding):(E=A.from(E,X),X=""))):E instanceof A?X="":B._isUint8Array(E)?(E=B._uint8ArrayToBuffer(E),X=""):E!=null&&(Oe=new g("chunk",["string","Buffer","Uint8Array"],E))),Oe)w(p,Oe);else if(E===null)fe.state&=~re,Pe(p,fe);else if((fe.state&F)!==0||E&&E.length>0)if(ie)if((fe.state&W)!==0)w(p,new l);else{if(fe.destroyed||fe.errored)return!1;Ce(p,fe,E,!0)}else if(fe.ended)w(p,new h);else{if(fe.destroyed||fe.errored)return!1;fe.state&=~re,fe.decoder&&!X?(E=fe.decoder.write(E),fe.objectMode||E.length!==0?Ce(p,fe,E,!1):Le(p,fe)):Ce(p,fe,E,!1)}else ie||(fe.state&=~re,Le(p,fe));return!fe.ended&&(fe.length<fe.highWaterMark||fe.length===0)}function Ce(p,E,X,ie){E.flowing&&E.length===0&&!E.sync&&p.listenerCount("data")>0?((E.state&te)!==0?E.awaitDrainWriters.clear():E.awaitDrainWriters=null,E.dataEmitted=!0,p.emit("data",X)):(E.length+=E.objectMode?1:X.length,ie?E.buffer.unshift(X):E.buffer.push(X),(E.state&le)!==0&&He(p)),Le(p,E)}K.prototype.isPaused=function(){const p=this._readableState;return p[R]===!0||p.flowing===!1},K.prototype.setEncoding=function(p){const E=new M(p);this._readableState.decoder=E,this._readableState.encoding=this._readableState.decoder.encoding;const X=this._readableState.buffer;let ie="";for(const fe of X)ie+=E.write(fe);return X.clear(),ie!==""&&X.push(ie),this._readableState.length=ie.length,this};const be=1073741824;function xe(p){if(p>be)throw new d("size","<= 1GiB",p);return p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++,p}function Ie(p,E){return p<=0||E.length===0&&E.ended?0:(E.state&F)!==0?1:n(p)?E.flowing&&E.length?E.buffer.first().length:E.length:p<=E.length?p:E.ended?E.length:0}K.prototype.read=function(p){S("read",p),p===void 0?p=NaN:t(p)||(p=o(p,10));const E=this._readableState,X=p;if(p>E.highWaterMark&&(E.highWaterMark=xe(p)),p!==0&&(E.state&=~H),p===0&&E.needReadable&&((E.highWaterMark!==0?E.length>=E.highWaterMark:E.length>0)||E.ended))return S("read: emitReadable",E.length,E.ended),E.length===0&&E.ended?At(this):He(this),null;if(p=Ie(p,E),p===0&&E.ended)return E.length===0&&At(this),null;let ie=(E.state&le)!==0;if(S("need readable",ie),(E.length===0||E.length-p<E.highWaterMark)&&(ie=!0,S("length less than watermark",ie)),E.ended||E.reading||E.destroyed||E.errored||!E.constructed)ie=!1,S("reading, ended or constructing",ie);else if(ie){S("do read"),E.state|=re|ae,E.length===0&&(E.state|=le);try{this._read(E.highWaterMark)}catch(Oe){w(this,Oe)}E.state&=~ae,E.reading||(p=Ie(X,E))}let fe;return p>0?fe=ot(p,E):fe=null,fe===null?(E.needReadable=E.length<=E.highWaterMark,p=0):(E.length-=p,E.multiAwaitDrain?E.awaitDrainWriters.clear():E.awaitDrainWriters=null),E.length===0&&(E.ended||(E.needReadable=!0),X!==p&&E.ended&&At(this)),fe!==null&&!E.errorEmitted&&!E.closeEmitted&&(E.dataEmitted=!0,this.emit("data",fe)),fe};function Pe(p,E){if(S("onEofChunk"),!E.ended){if(E.decoder){const X=E.decoder.end();X&&X.length&&(E.buffer.push(X),E.length+=E.objectMode?1:X.length)}E.ended=!0,E.sync?He(p):(E.needReadable=!1,E.emittedReadable=!0,ft(p))}}function He(p){const E=p._readableState;S("emitReadable",E.needReadable,E.emittedReadable),E.needReadable=!1,E.emittedReadable||(S("emitReadable",E.flowing),E.emittedReadable=!0,r.nextTick(ft,p))}function ft(p){const E=p._readableState;S("emitReadable_",E.destroyed,E.length,E.ended),!E.destroyed&&!E.errored&&(E.length||E.ended)&&(p.emit("readable"),E.emittedReadable=!1),E.needReadable=!E.flowing&&!E.ended&&E.length<=E.highWaterMark,Et(p)}function Le(p,E){!E.readingMore&&E.constructed&&(E.readingMore=!0,r.nextTick(Ut,p,E))}function Ut(p,E){for(;!E.reading&&!E.ended&&(E.length<E.highWaterMark||E.flowing&&E.length===0);){const X=E.length;if(S("maybeReadMore read 0"),p.read(0),X===E.length)break}E.readingMore=!1}K.prototype._read=function(p){throw new a("_read()")},K.prototype.pipe=function(p,E){const X=this,ie=this._readableState;ie.pipes.length===1&&(ie.multiAwaitDrain||(ie.multiAwaitDrain=!0,ie.awaitDrainWriters=new T(ie.awaitDrainWriters?[ie.awaitDrainWriters]:[]))),ie.pipes.push(p),S("pipe count=%d opts=%j",ie.pipes.length,E);const Oe=(!E||E.end!==!1)&&p!==r.stdout&&p!==r.stderr?zt:ct;ie.endEmitted?r.nextTick(Oe):X.once("end",Oe),p.on("unpipe",De);function De(Ze,ze){S("onunpipe"),Ze===X&&ze&&ze.hasUnpiped===!1&&(ze.hasUnpiped=!0,Rr())}function zt(){S("onend"),p.end()}let ke,Gt=!1;function Rr(){S("cleanup"),p.removeListener("close",Je),p.removeListener("finish",It),ke&&p.removeListener("drain",ke),p.removeListener("error",Tt),p.removeListener("unpipe",De),X.removeListener("end",zt),X.removeListener("end",ct),X.removeListener("data",Vt),Gt=!0,ke&&ie.awaitDrainWriters&&(!p._writableState||p._writableState.needDrain)&&ke()}function Kt(){Gt||(ie.pipes.length===1&&ie.pipes[0]===p?(S("false write response, pause",0),ie.awaitDrainWriters=p,ie.multiAwaitDrain=!1):ie.pipes.length>1&&ie.pipes.includes(p)&&(S("false write response, pause",ie.awaitDrainWriters.size),ie.awaitDrainWriters.add(p)),X.pause()),ke||(ke=Sr(X,p),p.on("drain",ke))}X.on("data",Vt);function Vt(Ze){S("ondata");const ze=p.write(Ze);S("dest.write",ze),ze===!1&&Kt()}function Tt(Ze){if(S("onerror",Ze),ct(),p.removeListener("error",Tt),p.listenerCount("error")===0){const ze=p._writableState||p._readableState;ze&&!ze.errorEmitted?w(p,Ze):p.emit("error",Ze)}}C(p,"error",Tt);function Je(){p.removeListener("finish",It),ct()}p.once("close",Je);function It(){S("onfinish"),p.removeListener("close",Je),ct()}p.once("finish",It);function ct(){S("unpipe"),X.unpipe(p)}return p.emit("pipe",X),p.writableNeedDrain===!0?Kt():ie.flowing||(S("pipe resume"),X.resume()),p};function Sr(p,E){return function(){const ie=p._readableState;ie.awaitDrainWriters===E?(S("pipeOnDrain",1),ie.awaitDrainWriters=null):ie.multiAwaitDrain&&(S("pipeOnDrain",ie.awaitDrainWriters.size),ie.awaitDrainWriters.delete(E)),(!ie.awaitDrainWriters||ie.awaitDrainWriters.size===0)&&p.listenerCount("data")&&p.resume()}}K.prototype.unpipe=function(p){const E=this._readableState,X={hasUnpiped:!1};if(E.pipes.length===0)return this;if(!p){const fe=E.pipes;E.pipes=[],this.pause();for(let Oe=0;Oe<fe.length;Oe++)fe[Oe].emit("unpipe",this,{hasUnpiped:!1});return this}const ie=e(E.pipes,p);return ie===-1?this:(E.pipes.splice(ie,1),E.pipes.length===0&&this.pause(),p.emit("unpipe",this,X),this)},K.prototype.on=function(p,E){const X=B.prototype.on.call(this,p,E),ie=this._readableState;return p==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):p==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,S("on readable",ie.length,ie.reading),ie.length?He(this):ie.reading||r.nextTick(Xe,this)),X},K.prototype.addListener=K.prototype.on,K.prototype.removeListener=function(p,E){const X=B.prototype.removeListener.call(this,p,E);return p==="readable"&&r.nextTick(qt,this),X},K.prototype.off=K.prototype.removeListener,K.prototype.removeAllListeners=function(p){const E=B.prototype.removeAllListeners.apply(this,arguments);return(p==="readable"||p===void 0)&&r.nextTick(qt,this),E};function qt(p){const E=p._readableState;E.readableListening=p.listenerCount("readable")>0,E.resumeScheduled&&E[R]===!1?E.flowing=!0:p.listenerCount("data")>0?p.resume():E.readableListening||(E.flowing=null)}function Xe(p){S("readable nexttick read 0"),p.read(0)}K.prototype.resume=function(){const p=this._readableState;return p.flowing||(S("resume"),p.flowing=!p.readableListening,yt(this,p)),p[R]=!1,this};function yt(p,E){E.resumeScheduled||(E.resumeScheduled=!0,r.nextTick(Er,p,E))}function Er(p,E){S("resume",E.reading),E.reading||p.read(0),E.resumeScheduled=!1,p.emit("resume"),Et(p),E.flowing&&!E.reading&&p.read(0)}K.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[R]=!0,this};function Et(p){const E=p._readableState;for(S("flow",E.flowing);E.flowing&&p.read()!==null;);}K.prototype.wrap=function(p){let E=!1;p.on("data",ie=>{!this.push(ie)&&p.pause&&(E=!0,p.pause())}),p.on("end",()=>{this.push(null)}),p.on("error",ie=>{w(this,ie)}),p.on("close",()=>{this.destroy()}),p.on("destroy",()=>{this.destroy()}),this._read=()=>{E&&p.resume&&(E=!1,p.resume())};const X=s(p);for(let ie=1;ie<X.length;ie++){const fe=X[ie];this[fe]===void 0&&typeof p[fe]=="function"&&(this[fe]=p[fe].bind(p))}return this},K.prototype[k]=function(){return Bt(this)},K.prototype.iterator=function(p){return p!==void 0&&v(p,"options"),Bt(this,p)};function Bt(p,E){typeof p.read!="function"&&(p=K.wrap(p,{objectMode:!0}));const X=$t(p,E);return X.stream=p,X}async function*$t(p,E){let X=j;function ie(De){this===p?(X(),X=j):X=De}p.on("readable",ie);let fe;const Oe=f(p,{writable:!1},De=>{fe=De?i(fe,De):null,X(),X=j});try{for(;;){const De=p.destroyed?null:p.read();if(De!==null)yield De;else{if(fe)throw fe;if(fe===null)return;await new O(ie)}}}catch(De){throw fe=i(fe,De),fe}finally{(fe||E?.destroyOnReturn!==!1)&&(fe===void 0||p._readableState.autoDestroy)?G.destroyer(p,null):(p.off("readable",ie),Oe())}}c(K.prototype,{readable:{__proto__:null,get(){const p=this._readableState;return!!p&&p.readable!==!1&&!p.destroyed&&!p.errorEmitted&&!p.endEmitted},set(p){this._readableState&&(this._readableState.readable=!!p)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(p){this._readableState&&(this._readableState.flowing=p)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(p){this._readableState&&(this._readableState.destroyed=p)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),c(Q.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[R]!==!1},set(p){this[R]=!!p}}}),K._fromList=ot;function ot(p,E){if(E.length===0)return null;let X;return E.objectMode?X=E.buffer.shift():!p||p>=E.length?(E.decoder?X=E.buffer.join(""):E.buffer.length===1?X=E.buffer.first():X=E.buffer.concat(E.length),E.buffer.clear()):X=E.buffer.consume(p,E.decoder),X}function At(p){const E=p._readableState;S("endReadable",E.endEmitted),E.endEmitted||(E.ended=!0,r.nextTick(Qe,E,p))}function Qe(p,E){if(S("endReadableNT",p.endEmitted,p.length),!p.errored&&!p.closeEmitted&&!p.endEmitted&&p.length===0){if(p.endEmitted=!0,E.emit("end"),E.writable&&E.allowHalfOpen===!1)r.nextTick(Ar,E);else if(p.autoDestroy){const X=E._writableState;(!X||X.autoDestroy&&(X.finished||X.writable===!1))&&E.destroy()}}}function Ar(p){p.writable&&!p.writableEnded&&!p.destroyed&&p.end()}K.from=function(p,E){return b(K,p,E)};let Rt;function Ht(){return Rt===void 0&&(Rt={}),Rt}return K.fromWeb=function(p,E){return Ht().newStreamReadableFromReadableStream(p,E)},K.toWeb=function(p,E){return Ht().newReadableStreamFromStreamReadable(p,E)},K.wrap=function(p,E){var X,ie;return new K({objectMode:(X=(ie=p.readableObjectMode)!==null&&ie!==void 0?ie:p.objectMode)!==null&&X!==void 0?X:!0,...E,destroy(fe,Oe){G.destroyer(p,fe),Oe(fe)}}).wrap(p)},tn}var rn,li;function Tn(){if(li)return rn;li=1;const r=bt(),{ArrayPrototypeSlice:e,Error:t,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:c,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:_,Symbol:O,SymbolHasInstance:T}=Te();rn=v,v.WritableState=l;const{EventEmitter:D}=hr(),k=Rn().Stream,{Buffer:m}=_t(),U=St(),{addAbortSignal:B}=gr(),{getHighWaterMark:C,getDefaultHighWaterMark:A}=pr(),{ERR_INVALID_ARG_TYPE:u,ERR_METHOD_NOT_IMPLEMENTED:f,ERR_MULTIPLE_CALLBACK:S,ERR_STREAM_CANNOT_PIPE:z,ERR_STREAM_DESTROYED:G,ERR_STREAM_ALREADY_FINISHED:se,ERR_STREAM_NULL_VALUES:he,ERR_STREAM_WRITE_AFTER_END:i,ERR_UNKNOWN_ENCODING:g}=Me().codes,{errorOrDestroy:a}=U;s(v.prototype,k.prototype),s(v,k);function d(){}const h=O("kOnFinished");function l(N,L,q){typeof q!="boolean"&&(q=L instanceof nt()),this.objectMode=!!(N&&N.objectMode),q&&(this.objectMode=this.objectMode||!!(N&&N.writableObjectMode)),this.highWaterMark=N?C(this,N,"writableHighWaterMark",q):A(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ne=!!(N&&N.decodeStrings===!1);this.decodeStrings=!ne,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=w.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,I(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[h]=[]}function I(N){N.buffered=[],N.bufferedIndex=0,N.allBuffers=!0,N.allNoop=!0}l.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},o(l.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function v(N){const L=this instanceof nt();if(!L&&!n(v,this))return new v(N);this._writableState=new l(N,this,L),N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&B(N.signal,this)),k.call(this,N),U.construct(this,()=>{const q=this._writableState;q.writing||re(this,q),H(this,q)})}o(v,T,{__proto__:null,value:function(N){return n(this,N)?!0:this!==v?!1:N&&N._writableState instanceof l}}),v.prototype.pipe=function(){a(this,new z)};function R(N,L,q,ne){const te=N._writableState;if(typeof q=="function")ne=q,q=te.defaultEncoding;else{if(!q)q=te.defaultEncoding;else if(q!=="buffer"&&!m.isEncoding(q))throw new g(q);typeof ne!="function"&&(ne=d)}if(L===null)throw new he;if(!te.objectMode)if(typeof L=="string")te.decodeStrings!==!1&&(L=m.from(L,q),q="buffer");else if(L instanceof m)q="buffer";else if(k._isUint8Array(L))L=k._uint8ArrayToBuffer(L),q="buffer";else throw new u("chunk",["string","Buffer","Uint8Array"],L);let ee;return te.ending?ee=new i:te.destroyed&&(ee=new G("write")),ee?(r.nextTick(ne,ee),a(N,ee,!0),ee):(te.pendingcb++,M(N,te,L,q,ne))}v.prototype.write=function(N,L,q){return R(this,N,L,q)===!0},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){const N=this._writableState;N.corked&&(N.corked--,N.writing||re(this,N))},v.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=_(L)),!m.isEncoding(L))throw new g(L);return this._writableState.defaultEncoding=L,this};function M(N,L,q,ne,te){const ee=L.objectMode?1:q.length;L.length+=ee;const P=L.length<L.highWaterMark;return P||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:q,encoding:ne,callback:te}),L.allBuffers&&ne!=="buffer"&&(L.allBuffers=!1),L.allNoop&&te!==d&&(L.allNoop=!1)):(L.writelen=ee,L.writecb=te,L.writing=!0,L.sync=!0,N._write(q,ne,L.onwrite),L.sync=!1),P&&!L.errored&&!L.destroyed}function b(N,L,q,ne,te,ee,P){L.writelen=ne,L.writecb=P,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new G("write")):q?N._writev(te,L.onwrite):N._write(te,ee,L.onwrite),L.sync=!1}function j(N,L,q,ne){--L.pendingcb,ne(q),W(L),a(N,q)}function w(N,L){const q=N._writableState,ne=q.sync,te=q.writecb;if(typeof te!="function"){a(N,new S);return}q.writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,L?(L.stack,q.errored||(q.errored=L),N._readableState&&!N._readableState.errored&&(N._readableState.errored=L),ne?r.nextTick(j,N,q,L,te):j(N,q,L,te)):(q.buffered.length>q.bufferedIndex&&re(N,q),ne?q.afterWriteTickInfo!==null&&q.afterWriteTickInfo.cb===te?q.afterWriteTickInfo.count++:(q.afterWriteTickInfo={count:1,cb:te,stream:N,state:q},r.nextTick(F,q.afterWriteTickInfo)):Y(N,q,1,te))}function F({stream:N,state:L,count:q,cb:ne}){return L.afterWriteTickInfo=null,Y(N,L,q,ne)}function Y(N,L,q,ne){for(!L.ending&&!N.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,N.emit("drain"));q-- >0;)L.pendingcb--,ne();L.destroyed&&W(L),H(N,L)}function W(N){if(N.writing)return;for(let te=N.bufferedIndex;te<N.buffered.length;++te){var L;const{chunk:ee,callback:P}=N.buffered[te],J=N.objectMode?1:ee.length;N.length-=J,P((L=N.errored)!==null&&L!==void 0?L:new G("write"))}const q=N[h].splice(0);for(let te=0;te<q.length;te++){var ne;q[te]((ne=N.errored)!==null&&ne!==void 0?ne:new G("end"))}I(N)}function re(N,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:q,bufferedIndex:ne,objectMode:te}=L,ee=q.length-ne;if(!ee)return;let P=ne;if(L.bufferProcessing=!0,ee>1&&N._writev){L.pendingcb-=ee-1;const J=L.allNoop?d:K=>{for(let we=P;we<q.length;++we)q[we].callback(K)},Q=L.allNoop&&P===0?q:e(q,P);Q.allBuffers=L.allBuffers,b(N,L,!0,L.length,Q,"",J),I(L)}else{do{const{chunk:J,encoding:Q,callback:K}=q[P];q[P++]=null;const we=te?1:J.length;b(N,L,!1,we,J,Q,K)}while(P<q.length&&!L.writing);P===q.length?I(L):P>256?(q.splice(0,P),L.bufferedIndex=0):L.bufferedIndex=P}L.bufferProcessing=!1}v.prototype._write=function(N,L,q){if(this._writev)this._writev([{chunk:N,encoding:L}],q);else throw new f("_write()")},v.prototype._writev=null,v.prototype.end=function(N,L,q){const ne=this._writableState;typeof N=="function"?(q=N,N=null,L=null):typeof L=="function"&&(q=L,L=null);let te;if(N!=null){const ee=R(this,N,L);ee instanceof t&&(te=ee)}return ne.corked&&(ne.corked=1,this.uncork()),te||(!ne.errored&&!ne.ending?(ne.ending=!0,H(this,ne,!0),ne.ended=!0):ne.finished?te=new se("end"):ne.destroyed&&(te=new G("end"))),typeof q=="function"&&(te||ne.finished?r.nextTick(q,te):ne[h].push(q)),this};function Z(N){return N.ending&&!N.destroyed&&N.constructed&&N.length===0&&!N.errored&&N.buffered.length===0&&!N.finished&&!N.writing&&!N.errorEmitted&&!N.closeEmitted}function ae(N,L){let q=!1;function ne(te){if(q){a(N,te??S());return}if(q=!0,L.pendingcb--,te){const ee=L[h].splice(0);for(let P=0;P<ee.length;P++)ee[P](te);a(N,te,L.sync)}else Z(L)&&(L.prefinished=!0,N.emit("prefinish"),L.pendingcb++,r.nextTick(V,N,L))}L.sync=!0,L.pendingcb++;try{N._final(ne)}catch(te){ne(te)}L.sync=!1}function le(N,L){!L.prefinished&&!L.finalCalled&&(typeof N._final=="function"&&!L.destroyed?(L.finalCalled=!0,ae(N,L)):(L.prefinished=!0,N.emit("prefinish")))}function H(N,L,q){Z(L)&&(le(N,L),L.pendingcb===0&&(q?(L.pendingcb++,r.nextTick((ne,te)=>{Z(te)?V(ne,te):te.pendingcb--},N,L)):Z(L)&&(L.pendingcb++,V(N,L))))}function V(N,L){L.pendingcb--,L.finished=!0;const q=L[h].splice(0);for(let ne=0;ne<q.length;ne++)q[ne]();if(N.emit("finish"),L.autoDestroy){const ne=N._readableState;(!ne||ne.autoDestroy&&(ne.endEmitted||ne.readable===!1))&&N.destroy()}}c(v.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(N){this._writableState&&(this._writableState.destroyed=N)}},writable:{__proto__:null,get(){const N=this._writableState;return!!N&&N.writable!==!1&&!N.destroyed&&!N.errored&&!N.ending&&!N.ended},set(N){this._writableState&&(this._writableState.writable=!!N)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const N=this._writableState;return N?!N.destroyed&&!N.ending&&N.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const oe=U.destroy;v.prototype.destroy=function(N,L){const q=this._writableState;return!q.destroyed&&(q.bufferedIndex<q.buffered.length||q[h].length)&&r.nextTick(W,q),oe.call(this,N,L),this},v.prototype._undestroy=U.undestroy,v.prototype._destroy=function(N,L){L(N)},v.prototype[D.captureRejectionSymbol]=function(N){this.destroy(N)};let ue;function ce(){return ue===void 0&&(ue={}),ue}return v.fromWeb=function(N,L){return ce().newStreamWritableFromWritableStream(N,L)},v.toWeb=function(N){return ce().newWritableStreamFromStreamWritable(N)},rn}var nn,ui;function ds(){if(ui)return nn;ui=1;const r=bt(),e=_t(),{isReadable:t,isWritable:n,isIterable:o,isNodeStream:c,isReadableNodeStream:s,isWritableNodeStream:_,isDuplexNodeStream:O,isReadableStream:T,isWritableStream:D}=it(),k=ut(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:U,ERR_INVALID_RETURN_VALUE:B}}=Me(),{destroyer:C}=St(),A=nt(),u=wr(),f=Tn(),{createDeferredPromise:S}=We(),z=no(),G=globalThis.Blob||e.Blob,se=typeof G<"u"?function(l){return l instanceof G}:function(l){return!1},he=globalThis.AbortController||jt().AbortController,{FunctionPrototypeCall:i}=Te();class g extends A{constructor(l){super(l),l?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}nn=function h(l,I){if(O(l))return l;if(s(l))return d({readable:l});if(_(l))return d({writable:l});if(c(l))return d({writable:!1,readable:!1});if(T(l))return d({readable:u.fromWeb(l)});if(D(l))return d({writable:f.fromWeb(l)});if(typeof l=="function"){const{value:R,write:M,final:b,destroy:j}=a(l);if(o(R))return z(g,R,{objectMode:!0,write:M,final:b,destroy:j});const w=R?.then;if(typeof w=="function"){let F;const Y=i(w,R,W=>{if(W!=null)throw new B("nully","body",W)},W=>{C(F,W)});return F=new g({objectMode:!0,readable:!1,write:M,final(W){b(async()=>{try{await Y,r.nextTick(W,null)}catch(re){r.nextTick(W,re)}})},destroy:j})}throw new B("Iterable, AsyncIterable or AsyncFunction",I,R)}if(se(l))return h(l.arrayBuffer());if(o(l))return z(g,l,{objectMode:!0,writable:!1});if(T(l?.readable)&&D(l?.writable))return g.fromWeb(l);if(typeof l?.writable=="object"||typeof l?.readable=="object"){const R=l!=null&&l.readable?s(l?.readable)?l?.readable:h(l.readable):void 0,M=l!=null&&l.writable?_(l?.writable)?l?.writable:h(l.writable):void 0;return d({readable:R,writable:M})}const v=l?.then;if(typeof v=="function"){let R;return i(v,l,M=>{M!=null&&R.push(M),R.push(null)},M=>{C(R,M)}),R=new g({objectMode:!0,writable:!1,read(){}})}throw new U(I,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)};function a(h){let{promise:l,resolve:I}=S();const v=new he,R=v.signal;return{value:h((async function*(){for(;;){const b=l;l=null;const{chunk:j,done:w,cb:F}=await b;if(r.nextTick(F),w)return;if(R.aborted)throw new m(void 0,{cause:R.reason});({promise:l,resolve:I}=S()),yield j}})(),{signal:R}),write(b,j,w){const F=I;I=null,F({chunk:b,done:!1,cb:w})},final(b){const j=I;I=null,j({done:!0,cb:b})},destroy(b,j){v.abort(),j(b)}}}function d(h){const l=h.readable&&typeof h.readable.read!="function"?u.wrap(h.readable):h.readable,I=h.writable;let v=!!t(l),R=!!n(I),M,b,j,w,F;function Y(W){const re=w;w=null,re?re(W):W&&F.destroy(W)}return F=new g({readableObjectMode:!!(l!=null&&l.readableObjectMode),writableObjectMode:!!(I!=null&&I.writableObjectMode),readable:v,writable:R}),R&&(k(I,W=>{R=!1,W&&C(l,W),Y(W)}),F._write=function(W,re,Z){I.write(W,re)?Z():M=Z},F._final=function(W){I.end(),b=W},I.on("drain",function(){if(M){const W=M;M=null,W()}}),I.on("finish",function(){if(b){const W=b;b=null,W()}})),v&&(k(l,W=>{v=!1,W&&C(l,W),Y(W)}),l.on("readable",function(){if(j){const W=j;j=null,W()}}),l.on("end",function(){F.push(null)}),F._read=function(){for(;;){const W=l.read();if(W===null){j=F._read;return}if(!F.push(W))return}}),F._destroy=function(W,re){!W&&w!==null&&(W=new m),j=null,M=null,b=null,w===null?re(W):(w=re,C(I,W),C(l,W))},F}return nn}var on,fi;function nt(){if(fi)return on;fi=1;const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:t,ObjectSetPrototypeOf:n}=Te();on=s;const o=wr(),c=Tn();n(s.prototype,o.prototype),n(s,o);{const D=t(c.prototype);for(let k=0;k<D.length;k++){const m=D[k];s.prototype[m]||(s.prototype[m]=c.prototype[m])}}function s(D){if(!(this instanceof s))return new s(D);o.call(this,D),c.call(this,D),D?(this.allowHalfOpen=D.allowHalfOpen!==!1,D.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),D.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r(s.prototype,{writable:{__proto__:null,...e(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(c.prototype,"writableLength")},writableFinished:{__proto__:null,...e(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(D){this._readableState&&this._writableState&&(this._readableState.destroyed=D,this._writableState.destroyed=D)}}});let _;function O(){return _===void 0&&(_={}),_}s.fromWeb=function(D,k){return O().newStreamDuplexFromReadableWritablePair(D,k)},s.toWeb=function(D){return O().newReadableWritablePairFromDuplex(D)};let T;return s.from=function(D){return T||(T=ds()),T(D,"body")},on}var sn,ci;function io(){if(ci)return sn;ci=1;const{ObjectSetPrototypeOf:r,Symbol:e}=Te();sn=s;const{ERR_METHOD_NOT_IMPLEMENTED:t}=Me().codes,n=nt(),{getHighWaterMark:o}=pr();r(s.prototype,n.prototype),r(s,n);const c=e("kCallback");function s(T){if(!(this instanceof s))return new s(T);const D=T?o(this,T,"readableHighWaterMark",!0):null;D===0&&(T={...T,highWaterMark:null,readableHighWaterMark:D,writableHighWaterMark:T.writableHighWaterMark||0}),n.call(this,T),this._readableState.sync=!1,this[c]=null,T&&(typeof T.transform=="function"&&(this._transform=T.transform),typeof T.flush=="function"&&(this._flush=T.flush)),this.on("prefinish",O)}function _(T){typeof this._flush=="function"&&!this.destroyed?this._flush((D,k)=>{if(D){T?T(D):this.destroy(D);return}k!=null&&this.push(k),this.push(null),T&&T()}):(this.push(null),T&&T())}function O(){this._final!==_&&_.call(this)}return s.prototype._final=_,s.prototype._transform=function(T,D,k){throw new t("_transform()")},s.prototype._write=function(T,D,k){const m=this._readableState,U=this._writableState,B=m.length;this._transform(T,D,(C,A)=>{if(C){k(C);return}A!=null&&this.push(A),U.ended||B===m.length||m.length<m.highWaterMark?k():this[c]=k})},s.prototype._read=function(){if(this[c]){const T=this[c];this[c]=null,T()}},sn}var an,di;function oo(){if(di)return an;di=1;const{ObjectSetPrototypeOf:r}=Te();an=t;const e=io();r(t.prototype,e.prototype),r(t,e);function t(n){if(!(this instanceof t))return new t(n);e.call(this,n)}return t.prototype._transform=function(n,o,c){c(null,n)},an}var ln,hi;function In(){if(hi)return ln;hi=1;const r=bt(),{ArrayIsArray:e,Promise:t,SymbolAsyncIterator:n,SymbolDispose:o}=Te(),c=ut(),{once:s}=We(),_=St(),O=nt(),{aggregateTwoErrors:T,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:k,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:U,ERR_STREAM_PREMATURE_CLOSE:B},AbortError:C}=Me(),{validateFunction:A,validateAbortSignal:u}=Wt(),{isIterable:f,isReadable:S,isReadableNodeStream:z,isNodeStream:G,isTransformStream:se,isWebStream:he,isReadableStream:i,isReadableFinished:g}=it(),a=globalThis.AbortController||jt().AbortController;let d,h,l;function I(W,re,Z){let ae=!1;W.on("close",()=>{ae=!0});const le=c(W,{readable:re,writable:Z},H=>{ae=!H});return{destroy:H=>{ae||(ae=!0,_.destroyer(W,H||new U("pipe")))},cleanup:le}}function v(W){return A(W[W.length-1],"streams[stream.length - 1]"),W.pop()}function R(W){if(f(W))return W;if(z(W))return M(W);throw new D("val",["Readable","Iterable","AsyncIterable"],W)}async function*M(W){h||(h=wr()),yield*h.prototype[n].call(W)}async function b(W,re,Z,{end:ae}){let le,H=null;const V=ce=>{if(ce&&(le=ce),H){const N=H;H=null,N()}},oe=()=>new t((ce,N)=>{le?N(le):H=()=>{le?N(le):ce()}});re.on("drain",V);const ue=c(re,{readable:!1},V);try{re.writableNeedDrain&&await oe();for await(const ce of W)re.write(ce)||await oe();ae&&(re.end(),await oe()),Z()}catch(ce){Z(le!==ce?T(le,ce):ce)}finally{ue(),re.off("drain",V)}}async function j(W,re,Z,{end:ae}){se(re)&&(re=re.writable);const le=re.getWriter();try{for await(const H of W)await le.ready,le.write(H).catch(()=>{});await le.ready,ae&&await le.close(),Z()}catch(H){try{await le.abort(H),Z(H)}catch(V){Z(V)}}}function w(...W){return F(W,s(v(W)))}function F(W,re,Z){if(W.length===1&&e(W[0])&&(W=W[0]),W.length<2)throw new m("streams");const ae=new a,le=ae.signal,H=Z?.signal,V=[];u(H,"options.signal");function oe(){te(new C)}l=l||We().addAbortListener;let ue;H&&(ue=l(H,oe));let ce,N;const L=[];let q=0;function ne(Q){te(Q,--q===0)}function te(Q,K){var we;if(Q&&(!ce||ce.code==="ERR_STREAM_PREMATURE_CLOSE")&&(ce=Q),!(!ce&&!K)){for(;L.length;)L.shift()(ce);(we=ue)===null||we===void 0||we[o](),ae.abort(),K&&(ce||V.forEach(Ce=>Ce()),r.nextTick(re,ce,N))}}let ee;for(let Q=0;Q<W.length;Q++){const K=W[Q],we=Q<W.length-1,Ce=Q>0,be=we||Z?.end!==!1,xe=Q===W.length-1;if(G(K)){let Ie=function(Pe){Pe&&Pe.name!=="AbortError"&&Pe.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ne(Pe)};if(be){const{destroy:Pe,cleanup:He}=I(K,we,Ce);L.push(Pe),S(K)&&xe&&V.push(He)}K.on("error",Ie),S(K)&&xe&&V.push(()=>{K.removeListener("error",Ie)})}if(Q===0)if(typeof K=="function"){if(ee=K({signal:le}),!f(ee))throw new k("Iterable, AsyncIterable or Stream","source",ee)}else f(K)||z(K)||se(K)?ee=K:ee=O.from(K);else if(typeof K=="function"){if(se(ee)){var P;ee=R((P=ee)===null||P===void 0?void 0:P.readable)}else ee=R(ee);if(ee=K(ee,{signal:le}),we){if(!f(ee,!0))throw new k("AsyncIterable",`transform[${Q-1}]`,ee)}else{var J;d||(d=oo());const Ie=new d({objectMode:!0}),Pe=(J=ee)===null||J===void 0?void 0:J.then;if(typeof Pe=="function")q++,Pe.call(ee,Le=>{N=Le,Le!=null&&Ie.write(Le),be&&Ie.end(),r.nextTick(ne)},Le=>{Ie.destroy(Le),r.nextTick(ne,Le)});else if(f(ee,!0))q++,b(ee,Ie,ne,{end:be});else if(i(ee)||se(ee)){const Le=ee.readable||ee;q++,b(Le,Ie,ne,{end:be})}else throw new k("AsyncIterable or Promise","destination",ee);ee=Ie;const{destroy:He,cleanup:ft}=I(ee,!1,!0);L.push(He),xe&&V.push(ft)}}else if(G(K)){if(z(ee)){q+=2;const Ie=Y(ee,K,ne,{end:be});S(K)&&xe&&V.push(Ie)}else if(se(ee)||i(ee)){const Ie=ee.readable||ee;q++,b(Ie,K,ne,{end:be})}else if(f(ee))q++,b(ee,K,ne,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ee);ee=K}else if(he(K)){if(z(ee))q++,j(R(ee),K,ne,{end:be});else if(i(ee)||f(ee))q++,j(ee,K,ne,{end:be});else if(se(ee))q++,j(ee.readable,K,ne,{end:be});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ee);ee=K}else ee=O.from(K)}return(le!=null&&le.aborted||H!=null&&H.aborted)&&r.nextTick(oe),ee}function Y(W,re,Z,{end:ae}){let le=!1;if(re.on("close",()=>{le||Z(new B)}),W.pipe(re,{end:!1}),ae){let H=function(){le=!0,re.end()};g(W)?r.nextTick(H):W.once("end",H)}else Z();return c(W,{readable:!0,writable:!1},H=>{const V=W._readableState;H&&H.code==="ERR_STREAM_PREMATURE_CLOSE"&&V&&V.ended&&!V.errored&&!V.errorEmitted?W.once("end",Z).once("error",Z):Z(H)}),c(re,{readable:!1,writable:!0},Z)}return ln={pipelineImpl:F,pipeline:w},ln}var un,gi;function so(){if(gi)return un;gi=1;const{pipeline:r}=In(),e=nt(),{destroyer:t}=St(),{isNodeStream:n,isReadable:o,isWritable:c,isWebStream:s,isTransformStream:_,isWritableStream:O,isReadableStream:T}=it(),{AbortError:D,codes:{ERR_INVALID_ARG_VALUE:k,ERR_MISSING_ARGS:m}}=Me(),U=ut();return un=function(...C){if(C.length===0)throw new m("streams");if(C.length===1)return e.from(C[0]);const A=[...C];if(typeof C[0]=="function"&&(C[0]=e.from(C[0])),typeof C[C.length-1]=="function"){const d=C.length-1;C[d]=e.from(C[d])}for(let d=0;d<C.length;++d)if(!(!n(C[d])&&!s(C[d]))){if(d<C.length-1&&!(o(C[d])||T(C[d])||_(C[d])))throw new k(`streams[${d}]`,A[d],"must be readable");if(d>0&&!(c(C[d])||O(C[d])||_(C[d])))throw new k(`streams[${d}]`,A[d],"must be writable")}let u,f,S,z,G;function se(d){const h=z;z=null,h?h(d):d?G.destroy(d):!a&&!g&&G.destroy()}const he=C[0],i=r(C,se),g=!!(c(he)||O(he)||_(he)),a=!!(o(i)||T(i)||_(i));if(G=new e({writableObjectMode:!!(he!=null&&he.writableObjectMode),readableObjectMode:!!(i!=null&&i.readableObjectMode),writable:g,readable:a}),g){if(n(he))G._write=function(h,l,I){he.write(h,l)?I():u=I},G._final=function(h){he.end(),f=h},he.on("drain",function(){if(u){const h=u;u=null,h()}});else if(s(he)){const l=(_(he)?he.writable:he).getWriter();G._write=async function(I,v,R){try{await l.ready,l.write(I).catch(()=>{}),R()}catch(M){R(M)}},G._final=async function(I){try{await l.ready,l.close().catch(()=>{}),f=I}catch(v){I(v)}}}const d=_(i)?i.readable:i;U(d,()=>{if(f){const h=f;f=null,h()}})}if(a){if(n(i))i.on("readable",function(){if(S){const d=S;S=null,d()}}),i.on("end",function(){G.push(null)}),G._read=function(){for(;;){const d=i.read();if(d===null){S=G._read;return}if(!G.push(d))return}};else if(s(i)){const h=(_(i)?i.readable:i).getReader();G._read=async function(){for(;;)try{const{value:l,done:I}=await h.read();if(!G.push(l))return;if(I){G.push(null);return}}catch{return}}}}return G._destroy=function(d,h){!d&&z!==null&&(d=new D),S=null,u=null,f=null,z===null?h(d):(z=h,n(i)&&t(i,d))},G},un}var pi;function hs(){if(pi)return tr;pi=1;const r=globalThis.AbortController||jt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:t,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:o},AbortError:c}=Me(),{validateAbortSignal:s,validateInteger:_,validateObject:O}=Wt(),T=Te().Symbol("kWeak"),D=Te().Symbol("kResistStopPropagation"),{finished:k}=ut(),m=so(),{addAbortSignalNoValidate:U}=gr(),{isWritable:B,isNodeStream:C}=it(),{deprecate:A}=We(),{ArrayPrototypePush:u,Boolean:f,MathFloor:S,Number:z,NumberIsNaN:G,Promise:se,PromiseReject:he,PromiseResolve:i,PromisePrototypeThen:g,Symbol:a}=Te(),d=a("kEmpty"),h=a("kEof");function l(H,V){if(V!=null&&O(V,"options"),V?.signal!=null&&s(V.signal,"options.signal"),C(H)&&!B(H))throw new e("stream",H,"must be writable");const oe=m(this,H);return V!=null&&V.signal&&U(V.signal,oe),oe}function I(H,V){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);V!=null&&O(V,"options"),V?.signal!=null&&s(V.signal,"options.signal");let oe=1;V?.concurrency!=null&&(oe=S(V.concurrency));let ue=oe-1;return V?.highWaterMark!=null&&(ue=S(V.highWaterMark)),_(oe,"options.concurrency",1),_(ue,"options.highWaterMark",0),ue+=oe,async function*(){const N=We().AbortSignalAny([V?.signal].filter(f)),L=this,q=[],ne={signal:N};let te,ee,P=!1,J=0;function Q(){P=!0,K()}function K(){J-=1,we()}function we(){ee&&!P&&J<oe&&q.length<ue&&(ee(),ee=null)}async function Ce(){try{for await(let be of L){if(P)return;if(N.aborted)throw new c;try{if(be=H(be,ne),be===d)continue;be=i(be)}catch(xe){be=he(xe)}J+=1,g(be,K,Q),q.push(be),te&&(te(),te=null),!P&&(q.length>=ue||J>=oe)&&await new se(xe=>{ee=xe})}q.push(h)}catch(be){const xe=he(be);g(xe,K,Q),q.push(xe)}finally{P=!0,te&&(te(),te=null)}}Ce();try{for(;;){for(;q.length>0;){const be=await q[0];if(be===h)return;if(N.aborted)throw new c;be!==d&&(yield be),q.shift(),we()}await new se(be=>{te=be})}}finally{P=!0,ee&&(ee(),ee=null)}}.call(this)}function v(H=void 0){return H!=null&&O(H,"options"),H?.signal!=null&&s(H.signal,"options.signal"),async function*(){let oe=0;for await(const ce of this){var ue;if(H!=null&&(ue=H.signal)!==null&&ue!==void 0&&ue.aborted)throw new c({cause:H.signal.reason});yield[oe++,ce]}}.call(this)}async function R(H,V=void 0){for await(const oe of w.call(this,H,V))return!0;return!1}async function M(H,V=void 0){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);return!await R.call(this,async(...oe)=>!await H(...oe),V)}async function b(H,V){for await(const oe of w.call(this,H,V))return oe}async function j(H,V){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);async function oe(ue,ce){return await H(ue,ce),d}for await(const ue of I.call(this,oe,V));}function w(H,V){if(typeof H!="function")throw new t("fn",["Function","AsyncFunction"],H);async function oe(ue,ce){return await H(ue,ce)?ue:d}return I.call(this,oe,V)}class F extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(H,V,oe){var ue;if(typeof H!="function")throw new t("reducer",["Function","AsyncFunction"],H);oe!=null&&O(oe,"options"),oe?.signal!=null&&s(oe.signal,"options.signal");let ce=arguments.length>1;if(oe!=null&&(ue=oe.signal)!==null&&ue!==void 0&&ue.aborted){const te=new c(void 0,{cause:oe.signal.reason});throw this.once("error",()=>{}),await k(this.destroy(te)),te}const N=new r,L=N.signal;if(oe!=null&&oe.signal){const te={once:!0,[T]:this,[D]:!0};oe.signal.addEventListener("abort",()=>N.abort(),te)}let q=!1;try{for await(const te of this){var ne;if(q=!0,oe!=null&&(ne=oe.signal)!==null&&ne!==void 0&&ne.aborted)throw new c;ce?V=await H(V,te,{signal:L}):(V=te,ce=!0)}if(!q&&!ce)throw new F}finally{N.abort()}return V}async function W(H){H!=null&&O(H,"options"),H?.signal!=null&&s(H.signal,"options.signal");const V=[];for await(const ue of this){var oe;if(H!=null&&(oe=H.signal)!==null&&oe!==void 0&&oe.aborted)throw new c(void 0,{cause:H.signal.reason});u(V,ue)}return V}function re(H,V){const oe=I.call(this,H,V);return async function*(){for await(const ce of oe)yield*ce}.call(this)}function Z(H){if(H=z(H),G(H))return 0;if(H<0)throw new o("number",">= 0",H);return H}function ae(H,V=void 0){return V!=null&&O(V,"options"),V?.signal!=null&&s(V.signal,"options.signal"),H=Z(H),async function*(){var ue;if(V!=null&&(ue=V.signal)!==null&&ue!==void 0&&ue.aborted)throw new c;for await(const N of this){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new c;H--<=0&&(yield N)}}.call(this)}function le(H,V=void 0){return V!=null&&O(V,"options"),V?.signal!=null&&s(V.signal,"options.signal"),H=Z(H),async function*(){var ue;if(V!=null&&(ue=V.signal)!==null&&ue!==void 0&&ue.aborted)throw new c;for await(const N of this){var ce;if(V!=null&&(ce=V.signal)!==null&&ce!==void 0&&ce.aborted)throw new c;if(H-- >0&&(yield N),H<=0)return}}.call(this)}return tr.streamReturningOperators={asIndexedPairs:A(v,"readable.asIndexedPairs will be removed in a future version."),drop:ae,filter:w,flatMap:re,map:I,take:le,compose:l},tr.promiseReturningOperators={every:M,forEach:j,reduce:Y,toArray:W,some:R,find:b},tr}var fn,wi;function ao(){if(wi)return fn;wi=1;const{ArrayPrototypePop:r,Promise:e}=Te(),{isIterable:t,isNodeStream:n,isWebStream:o}=it(),{pipelineImpl:c}=In(),{finished:s}=ut();lo();function _(...O){return new e((T,D)=>{let k,m;const U=O[O.length-1];if(U&&typeof U=="object"&&!n(U)&&!t(U)&&!o(U)){const B=r(O);k=B.signal,m=B.end}c(O,(B,C)=>{B?D(B):T(C)},{signal:k,end:m})})}return fn={finished:s,pipeline:_},fn}var _i;function lo(){if(_i)return qr.exports;_i=1;const{Buffer:r}=_t(),{ObjectDefineProperty:e,ObjectKeys:t,ReflectApply:n}=Te(),{promisify:{custom:o}}=We(),{streamReturningOperators:c,promiseReturningOperators:s}=hs(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:_}}=Me(),O=so(),{setDefaultHighWaterMark:T,getDefaultHighWaterMark:D}=pr(),{pipeline:k}=In(),{destroyer:m}=St(),U=ut(),B=ao(),C=it(),A=qr.exports=Rn().Stream;A.isDestroyed=C.isDestroyed,A.isDisturbed=C.isDisturbed,A.isErrored=C.isErrored,A.isReadable=C.isReadable,A.isWritable=C.isWritable,A.Readable=wr();for(const f of t(c)){let z=function(...G){if(new.target)throw _();return A.Readable.from(n(S,this,G))};const S=c[f];e(z,"name",{__proto__:null,value:S.name}),e(z,"length",{__proto__:null,value:S.length}),e(A.Readable.prototype,f,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}for(const f of t(s)){let z=function(...G){if(new.target)throw _();return n(S,this,G)};const S=s[f];e(z,"name",{__proto__:null,value:S.name}),e(z,"length",{__proto__:null,value:S.length}),e(A.Readable.prototype,f,{__proto__:null,value:z,enumerable:!1,configurable:!0,writable:!0})}A.Writable=Tn(),A.Duplex=nt(),A.Transform=io(),A.PassThrough=oo(),A.pipeline=k;const{addAbortSignal:u}=gr();return A.addAbortSignal=u,A.finished=U,A.destroy=m,A.compose=O,A.setDefaultHighWaterMark=T,A.getDefaultHighWaterMark=D,e(A,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return B}}),e(k,o,{__proto__:null,enumerable:!0,get(){return B.pipeline}}),e(U,o,{__proto__:null,enumerable:!0,get(){return B.finished}}),A.Stream=A,A._isUint8Array=function(S){return S instanceof Uint8Array},A._uint8ArrayToBuffer=function(S){return r.from(S.buffer,S.byteOffset,S.byteLength)},qr.exports}var bi;function gs(){return bi||(bi=1,(function(r){const e=lo(),t=ao(),n=e.Readable.destroy;r.exports=e.Readable,r.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,r.exports._isUint8Array=e._isUint8Array,r.exports.isDisturbed=e.isDisturbed,r.exports.isErrored=e.isErrored,r.exports.isReadable=e.isReadable,r.exports.Readable=e.Readable,r.exports.Writable=e.Writable,r.exports.Duplex=e.Duplex,r.exports.Transform=e.Transform,r.exports.PassThrough=e.PassThrough,r.exports.addAbortSignal=e.addAbortSignal,r.exports.finished=e.finished,r.exports.destroy=e.destroy,r.exports.destroy=n,r.exports.pipeline=e.pipeline,r.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return t}}),r.exports.Stream=e.Stream,r.exports.default=r.exports})(Ur)),Ur.exports}var _r=gs(),cn,yi;function uo(){if(yi)return cn;yi=1,cn=c,c.default=c,c.stable=T,c.stableStringify=T;var r="[...]",e="[Circular]",t=[],n=[];function o(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function c(m,U,B,C){typeof C>"u"&&(C=o()),_(m,"",0,[],void 0,0,C);var A;try{n.length===0?A=JSON.stringify(m,U,B):A=JSON.stringify(m,k(U),B)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var u=t.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return A}function s(m,U,B,C){var A=Object.getOwnPropertyDescriptor(C,B);A.get!==void 0?A.configurable?(Object.defineProperty(C,B,{value:m}),t.push([C,B,U,A])):n.push([U,B,m]):(C[B]=m,t.push([C,B,U]))}function _(m,U,B,C,A,u,f){u+=1;var S;if(typeof m=="object"&&m!==null){for(S=0;S<C.length;S++)if(C[S]===m){s(e,m,U,A);return}if(typeof f.depthLimit<"u"&&u>f.depthLimit){s(r,m,U,A);return}if(typeof f.edgesLimit<"u"&&B+1>f.edgesLimit){s(r,m,U,A);return}if(C.push(m),Array.isArray(m))for(S=0;S<m.length;S++)_(m[S],S,S,C,m,u,f);else{var z=Object.keys(m);for(S=0;S<z.length;S++){var G=z[S];_(m[G],G,S,C,m,u,f)}}C.pop()}}function O(m,U){return m<U?-1:m>U?1:0}function T(m,U,B,C){typeof C>"u"&&(C=o());var A=D(m,"",0,[],void 0,0,C)||m,u;try{n.length===0?u=JSON.stringify(A,U,B):u=JSON.stringify(A,k(U),B)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;t.length!==0;){var f=t.pop();f.length===4?Object.defineProperty(f[0],f[1],f[3]):f[0][f[1]]=f[2]}}return u}function D(m,U,B,C,A,u,f){u+=1;var S;if(typeof m=="object"&&m!==null){for(S=0;S<C.length;S++)if(C[S]===m){s(e,m,U,A);return}try{if(typeof m.toJSON=="function")return}catch{return}if(typeof f.depthLimit<"u"&&u>f.depthLimit){s(r,m,U,A);return}if(typeof f.edgesLimit<"u"&&B+1>f.edgesLimit){s(r,m,U,A);return}if(C.push(m),Array.isArray(m))for(S=0;S<m.length;S++)D(m[S],S,S,C,m,u,f);else{var z={},G=Object.keys(m).sort(O);for(S=0;S<G.length;S++){var se=G[S];D(m[se],se,S,C,m,u,f),z[se]=m[se]}if(typeof A<"u")t.push([A,U,m]),A[U]=z;else return z}C.pop()}}function k(m){return m=typeof m<"u"?m:function(U,B){return B},function(U,B){if(n.length>0)for(var C=0;C<n.length;C++){var A=n[C];if(A[1]===U&&A[0]===B){B=A[2],n.splice(C,1);break}}return m.call(this,U,B)}}return cn}var ps=uo();const ws=vt(ps);var nr={exports:{}},dn,mi;function _s(){if(mi)return dn;mi=1,dn=r;function r(e,t){if(e&&t)return r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){n[o]=e[o]}),n;function n(){for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];var s=e.apply(this,o),_=o[o.length-1];return typeof s=="function"&&s!==_&&Object.keys(_).forEach(function(O){s[O]=_[O]}),s}}return dn}var vi;function On(){if(vi)return nr.exports;vi=1;var r=_s();nr.exports=r(e),nr.exports.strict=r(t),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return t(this)},configurable:!0})});function e(n){var o=function(){return o.called?o.value:(o.called=!0,o.value=n.apply(this,arguments))};return o.called=!1,o}function t(n){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=n.apply(this,arguments)},c=n.name||"Function wrapped with `once`";return o.onceError=c+" shouldn't be called more than once",o.called=!1,o}return nr.exports}var hn,Si;function fo(){if(Si)return hn;Si=1;var r=On(),e=function(){},t=globalThis.Bare?queueMicrotask:cr.nextTick.bind(cr),n=function(s){return s.setHeader&&typeof s.abort=="function"},o=function(s){return s.stdio&&Array.isArray(s.stdio)&&s.stdio.length===3},c=function(s,_,O){if(typeof _=="function")return c(s,null,_);_||(_={}),O=r(O||e);var T=s._writableState,D=s._readableState,k=_.readable||_.readable!==!1&&s.readable,m=_.writable||_.writable!==!1&&s.writable,U=!1,B=function(){s.writable||C()},C=function(){m=!1,k||O.call(s)},A=function(){k=!1,m||O.call(s)},u=function(se){O.call(s,se?new Error("exited with error code: "+se):null)},f=function(se){O.call(s,se)},S=function(){t(z)},z=function(){if(!U){if(k&&!(D&&D.ended&&!D.destroyed))return O.call(s,new Error("premature close"));if(m&&!(T&&T.ended&&!T.destroyed))return O.call(s,new Error("premature close"))}},G=function(){s.req.on("finish",C)};return n(s)?(s.on("complete",C),s.on("abort",S),s.req?G():s.on("request",G)):m&&!T&&(s.on("end",B),s.on("close",B)),o(s)&&s.on("exit",u),s.on("end",A),s.on("finish",C),_.error!==!1&&s.on("error",f),s.on("close",S),function(){U=!0,s.removeListener("complete",C),s.removeListener("abort",S),s.removeListener("request",G),s.req&&s.req.removeListener("finish",C),s.removeListener("end",B),s.removeListener("close",B),s.removeListener("finish",C),s.removeListener("exit",u),s.removeListener("end",A),s.removeListener("error",f),s.removeListener("close",S)}};return hn=c,hn}var bs=fo();const Ei=vt(bs);var ys=On();const ms=vt(ys);var gn,Ai;function vs(){if(Ai)return gn;Ai=1;var r=On(),e=fo(),t;try{t=ls}catch{}var n=function(){},o=typeof cr>"u"?!1:/^v?\.0/.test(cr.version),c=function(m){return typeof m=="function"},s=function(m){return!o||!t?!1:(m instanceof(t.ReadStream||n)||m instanceof(t.WriteStream||n))&&c(m.close)},_=function(m){return m.setHeader&&c(m.abort)},O=function(m,U,B,C){C=r(C);var A=!1;m.on("close",function(){A=!0}),e(m,{readable:U,writable:B},function(f){if(f)return C(f);A=!0,C()});var u=!1;return function(f){if(!A&&!u){if(u=!0,s(m))return m.close(n);if(_(m))return m.abort();if(c(m.destroy))return m.destroy();C(f||new Error("stream was destroyed"))}}},T=function(m){m()},D=function(m,U){return m.pipe(U)},k=function(){var m=Array.prototype.slice.call(arguments),U=c(m[m.length-1]||n)&&m.pop()||n;if(Array.isArray(m[0])&&(m=m[0]),m.length<2)throw new Error("pump requires two streams per minimum");var B,C=m.map(function(A,u){var f=u<m.length-1,S=u>0;return O(A,f,S,function(z){B||(B=z),z&&C.forEach(T),!f&&(C.forEach(T),U(B))})});return m.reduce(D)};return gn=k,gn}var Ss=vs();const Ri=vt(Ss);function ir(){}const Ti="SYN",pn="ACK",Ii="BRK";class Oi extends _r.Duplex{constructor(e){let{name:t,target:n,targetWindow:o=window,targetOrigin:c="*"}=e;if(super({objectMode:!0}),ge(this,"_init",void 0),ge(this,"_haveSyn",void 0),ge(this,"_name",void 0),ge(this,"_target",void 0),ge(this,"_targetWindow",void 0),ge(this,"_targetOrigin",void 0),ge(this,"_onMessage",void 0),ge(this,"_synIntervalId",void 0),!t||!n)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=n,this._targetWindow=o,this._targetOrigin=c,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Ii,null,ir),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Ti,null,ir),this.cork()}_onData(e){if(!this._init)e===Ti?(this._haveSyn=!0,this._write(pn,null,ir)):e===pn&&(this._init=!0,this._haveSyn||this._write(pn,null,ir),this.uncork());else if(e===Ii)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;this._targetOrigin!=="*"&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||typeof t!="object"||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,n){this._postMessage(e),n()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Es={rpc:{internal:-32603}},Ni={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Ci=Es.rpc.internal,As="Unspecified error message. This is a bug, please report it.";function co(r){return Number.isInteger(r)}function Pi(r){return typeof r=="string"&&r.length>0}function Li(r){return!!r&&typeof r=="object"&&!Array.isArray(r)}function ho(r){const e=r;return!(!e||!co(e.code)||!Pi(e.message)||e.stack&&!Pi(e.stack))}function Rs(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:As;if(co(r)){const t=r.toString();if(Object.hasOwn(Ni,t))return Ni[t].message}return e}const Ts={code:Ci,message:Rs(Ci)};function vn(r){try{JSON.parse(JSON.stringify(r,(e,t)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof t=="function"||typeof t=="symbol")throw new Error("Not valid json");return t}),(e,t)=>{if(!(e==="__proto__"||e==="constructor"))return t})}catch{return!1}return!0}function xi(r){return Object.getOwnPropertyNames(r).reduce((e,t)=>{const n=r[t];return vn(n)&&(e[t]=n),e},{})}function Is(r){return Array.isArray(r)?r.map(e=>vn(e)?e:Li(e)?xi(e):null):Li(r)?xi(r):vn(r)?r:null}function Os(r,e){if(r&&typeof r=="object"&&"serialize"in r&&typeof r.serialize=="function")return r.serialize();if(ho(r))return r;const t=Is(r);return $e($e({},e),{},{data:{cause:t}})}function Mi(r){let{fallbackError:e=Ts,shouldIncludeStack:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!ho(e))throw new Error("Must provide fallback error with integer number code and string message.");const n=Os(r,e);return t||delete n.stack,n}function Di(r,e,t){try{Reflect.apply(r,e,t)}catch(n){setTimeout(()=>{throw n})}}function Ns(r){const e=r.length,t=new Array(e);for(let n=0;n<e;n+=1)t[n]=r[n];return t}class br extends ns.EventEmitter{emit(e){let t=e==="error";const n=this._events;if(n!==void 0)t=t&&n.error===void 0;else if(!t)return!1;for(var o=arguments.length,c=new Array(o>1?o-1:0),s=1;s<o;s++)c[s-1]=arguments[s];if(t){let O;if(c.length>0&&([O]=c),O instanceof Error)throw O;const T=new Error(`Unhandled error.${O?` (${O.message})`:""}`);throw T.context=O,T}const _=n[e];if(_===void 0)return!1;if(typeof _=="function")Di(_,this,c);else{const O=_.length,T=Ns(_);for(let D=0;D<O;D+=1)Di(T[D],this,c)}return!0}}class Pt extends Error{constructor(e){let{code:t,message:n,data:o}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),ge(this,"code",void 0),ge(this,"data",void 0),this.code=t,o!==void 0&&(this.data=o)}toString(){return ws({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Sn=function(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(n,o)=>{n||o.error?e(n||o.error):!t||Array.isArray(o)?r(o):r(o.result)}};function Cs(){const r={};function e(){return!1}const t=new br;function n(O){const T=r[O.id];if(!T)throw new Error(`StreamMiddleware - Unknown response id "${O.id}"`);delete r[O.id],Object.assign(T.res,O),setTimeout(T.end)}function o(O){t.emit("notification",O)}function c(O,T,D){let k;try{!O.id?o(O):n(O)}catch(m){k=m}D(k)}const s=new _r.Duplex({objectMode:!0,read:e,write:c});return{events:t,middleware:(O,T,D,k)=>{s.push(O),r[O.id]={req:O,res:T,next:D,end:k}},stream:s}}function Ps(){return(r,e,t,n)=>{const o=r.id,c=Math.random().toString(36).slice(2);r.id=c,e.id=c,t(s=>{r.id=o,e.id=o,s()})}}class tt extends br{constructor(){super(),ge(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,n){const o=[];let c=null,s=!1;for(const _ of n)if([c,s]=await tt._runMiddleware(e,t,_,o),s)break;return[c,s,o.reverse()]}static _runMiddleware(e,t,n,o){return new Promise(c=>{const s=O=>{const T=O||t.error;T&&(typeof T=="object"&&Object.keys(T).includes("stack")===!1&&(T.stack="Stack trace is not available."),t.error=Mi(T,{shouldIncludeStack:!0,fallbackError:{message:T?.message||T?.toString(),code:T?.code||-32603,stack:T?.stack||"Stack trace is not available.",data:T?.data||T?.message||T?.toString()}})),c([T,!0])},_=O=>{t.error?s(t.error):(O&&(typeof O!="function"&&s(new Pt({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),o.push(O)),c([null,!1]))};try{n(e,t,_,s)}catch(O){s(O)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((n,o)=>{t(c=>c?o(c):n())})}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new Pt({code:-32603,message:"Response has no error or result for request"});if(!n)throw new Pt({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,o)=>{try{const[c,s,_]=await tt._runAllMiddleware(e,t,this._middleware);return s?(await tt._runReturnHandlers(_),o(c)):n(async O=>{try{await tt._runReturnHandlers(_)}catch(T){return O(T)}return O()})}catch(c){return o(c)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(e){return new Promise((t,n)=>{this._handle(e,(o,c)=>{o&&c===void 0?n(o):t(c)}).catch(n)})}async _handle(e,t){if(!e||Array.isArray(e)||typeof e!="object"){const U=new Pt({code:-32603,message:"request must be plain object"});return t(U,{id:void 0,jsonrpc:"2.0",error:U})}if(typeof e.method!="string"){const U=new Pt({code:-32603,message:"method must be string"});return t(U,{id:e.id,jsonrpc:"2.0",error:U})}const n=$e({},e),o={id:n.id,jsonrpc:n.jsonrpc};let c=null;try{await this._processRequest(n,o)}catch(U){c=U}if(c&&(delete o.result,!o.error)){var s,_,O,T,D,k,m;typeof c=="object"&&Object.keys(c).includes("stack")===!1&&(c.stack="Stack trace is not available."),o.error=Mi(c,{shouldIncludeStack:!0,fallbackError:{message:((s=c)===null||s===void 0?void 0:s.message)||((_=c)===null||_===void 0?void 0:_.toString()),code:((O=c)===null||O===void 0?void 0:O.code)||-32603,stack:((T=c)===null||T===void 0?void 0:T.stack)||"Stack trace is not available.",data:((D=c)===null||D===void 0?void 0:D.data)||((k=c)===null||k===void 0?void 0:k.message)||((m=c)===null||m===void 0?void 0:m.toString())}})}return t(c,o)}async _processRequest(e,t){const[n,o,c]=await tt._runAllMiddleware(e,t,this._middleware);if(tt._checkForCompletion(e,t,o),await tt._runReturnHandlers(c),n)throw n}}class Ls extends _r.Duplex{constructor(e){let{parent:t,name:n}=e;super({objectMode:!0}),ge(this,"_parent",void 0),ge(this,"_name",void 0),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}}const ki=Symbol("IGNORE_SUBSTREAM");class xs extends _r.Duplex{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super($e($e({},e),{},{objectMode:!0})),ge(this,"_substreams",void 0),ge(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new Ls({parent:this,name:e});return this._substreams[e]=t,Ms(this,n=>t.destroy(n||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=ki}_read(){}_write(e,t,n){const{name:o,data:c}=e;if(!o)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),n();const s=this._substreams[o];return s?(s!==ki&&s.push(c),n()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${o}"`),n())}}function Ms(r,e){const t=ms(e);Ei(r,{readable:!1},t),Ei(r,{writable:!1},t)}var xt={exports:{}};xt.exports;var ji;function Ds(){return ji||(ji=1,(function(r,e){var t=200,n="__lodash_hash_undefined__",o=800,c=16,s=9007199254740991,_="[object Arguments]",O="[object Array]",T="[object AsyncFunction]",D="[object Boolean]",k="[object Date]",m="[object Error]",U="[object Function]",B="[object GeneratorFunction]",C="[object Map]",A="[object Number]",u="[object Null]",f="[object Object]",S="[object Proxy]",z="[object RegExp]",G="[object Set]",se="[object String]",he="[object Undefined]",i="[object WeakMap]",g="[object ArrayBuffer]",a="[object DataView]",d="[object Float32Array]",h="[object Float64Array]",l="[object Int8Array]",I="[object Int16Array]",v="[object Int32Array]",R="[object Uint8Array]",M="[object Uint8ClampedArray]",b="[object Uint16Array]",j="[object Uint32Array]",w=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,W={};W[d]=W[h]=W[l]=W[I]=W[v]=W[R]=W[M]=W[b]=W[j]=!0,W[_]=W[O]=W[g]=W[D]=W[a]=W[k]=W[m]=W[U]=W[C]=W[A]=W[f]=W[z]=W[G]=W[se]=W[i]=!1;var re=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Z=typeof self=="object"&&self&&self.Object===Object&&self,ae=re||Z||Function("return this")(),le=e&&!e.nodeType&&e,H=le&&!0&&r&&!r.nodeType&&r,V=H&&H.exports===le,oe=V&&re.process,ue=(function(){try{var y=H&&H.require&&H.require("util").types;return y||oe&&oe.binding&&oe.binding("util")}catch{}})(),ce=ue&&ue.isTypedArray;function N(y,x,$){switch($.length){case 0:return y.call(x);case 1:return y.call(x,$[0]);case 2:return y.call(x,$[0],$[1]);case 3:return y.call(x,$[0],$[1],$[2])}return y.apply(x,$)}function L(y,x){for(var $=-1,de=Array(y);++$<y;)de[$]=x($);return de}function q(y){return function(x){return y(x)}}function ne(y,x){return y?.[x]}function te(y,x){return function($){return y(x($))}}var ee=Array.prototype,P=Function.prototype,J=Object.prototype,Q=ae["__core-js_shared__"],K=P.toString,we=J.hasOwnProperty,Ce=(function(){var y=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""})(),be=J.toString,xe=K.call(Object),Ie=RegExp("^"+K.call(we).replace(w,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=V?ae.Buffer:void 0,He=ae.Symbol,ft=ae.Uint8Array;Pe&&Pe.allocUnsafe;var Le=te(Object.getPrototypeOf,Object),Ut=Object.create,Sr=J.propertyIsEnumerable,qt=ee.splice,Xe=He?He.toStringTag:void 0,yt=(function(){try{var y=Or(Object,"defineProperty");return y({},"",{}),y}catch{}})(),Er=Pe?Pe.isBuffer:void 0,Et=Math.max,Bt=Date.now,$t=Or(ae,"Map"),ot=Or(Object,"create"),At=(function(){function y(){}return function(x){if(!dt(x))return{};if(Ut)return Ut(x);y.prototype=x;var $=new y;return y.prototype=void 0,$}})();function Qe(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var de=y[x];this.set(de[0],de[1])}}function Ar(){this.__data__=ot?ot(null):{},this.size=0}function Rt(y){var x=this.has(y)&&delete this.__data__[y];return this.size-=x?1:0,x}function Ht(y){var x=this.__data__;if(ot){var $=x[y];return $===n?void 0:$}return we.call(x,y)?x[y]:void 0}function p(y){var x=this.__data__;return ot?x[y]!==void 0:we.call(x,y)}function E(y,x){var $=this.__data__;return this.size+=this.has(y)?0:1,$[y]=ot&&x===void 0?n:x,this}Qe.prototype.clear=Ar,Qe.prototype.delete=Rt,Qe.prototype.get=Ht,Qe.prototype.has=p,Qe.prototype.set=E;function X(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var de=y[x];this.set(de[0],de[1])}}function ie(){this.__data__=[],this.size=0}function fe(y){var x=this.__data__,$=Jt(x,y);if($<0)return!1;var de=x.length-1;return $==de?x.pop():qt.call(x,$,1),--this.size,!0}function Oe(y){var x=this.__data__,$=Jt(x,y);return $<0?void 0:x[$][1]}function De(y){return Jt(this.__data__,y)>-1}function zt(y,x){var $=this.__data__,de=Jt($,y);return de<0?(++this.size,$.push([y,x])):$[de][1]=x,this}X.prototype.clear=ie,X.prototype.delete=fe,X.prototype.get=Oe,X.prototype.has=De,X.prototype.set=zt;function ke(y){var x=-1,$=y==null?0:y.length;for(this.clear();++x<$;){var de=y[x];this.set(de[0],de[1])}}function Gt(){this.size=0,this.__data__={hash:new Qe,map:new($t||X),string:new Qe}}function Rr(y){var x=Xt(this,y).delete(y);return this.size-=x?1:0,x}function Kt(y){return Xt(this,y).get(y)}function Vt(y){return Xt(this,y).has(y)}function Tt(y,x){var $=Xt(this,y),de=$.size;return $.set(y,x),this.size+=$.size==de?0:1,this}ke.prototype.clear=Gt,ke.prototype.delete=Rr,ke.prototype.get=Kt,ke.prototype.has=Vt,ke.prototype.set=Tt;function Je(y){var x=this.__data__=new X(y);this.size=x.size}function It(){this.__data__=new X,this.size=0}function ct(y){var x=this.__data__,$=x.delete(y);return this.size=x.size,$}function Ze(y){return this.__data__.get(y)}function ze(y){return this.__data__.has(y)}function vo(y,x){var $=this.__data__;if($ instanceof X){var de=$.__data__;if(!$t||de.length<t-1)return de.push([y,x]),this.size=++$.size,this;$=this.__data__=new ke(de)}return $.set(y,x),this.size=$.size,this}Je.prototype.clear=It,Je.prototype.delete=ct,Je.prototype.get=Ze,Je.prototype.has=ze,Je.prototype.set=vo;function So(y,x){var $=Pr(y),de=!$&&Cr(y),_e=!$&&!de&&kn(y),me=!$&&!de&&!_e&&Wn(y),Ee=$||de||_e||me,ye=Ee?L(y.length,String):[],Ae=ye.length;for(var Ge in y)Ee&&(Ge=="length"||_e&&(Ge=="offset"||Ge=="parent")||me&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||Mn(Ge,Ae))||ye.push(Ge);return ye}function Tr(y,x,$){($!==void 0&&!Qt(y[x],$)||$===void 0&&!(x in y))&&Ir(y,x,$)}function Eo(y,x,$){var de=y[x];(!(we.call(y,x)&&Qt(de,$))||$===void 0&&!(x in y))&&Ir(y,x,$)}function Jt(y,x){for(var $=y.length;$--;)if(Qt(y[$][0],x))return $;return-1}function Ir(y,x,$){x=="__proto__"&&yt?yt(y,x,{configurable:!0,enumerable:!0,value:$,writable:!0}):y[x]=$}var Ao=jo();function Yt(y){return y==null?y===void 0?he:u:Xe&&Xe in Object(y)?Wo(y):Ho(y)}function Ln(y){return Ot(y)&&Yt(y)==_}function Ro(y){if(!dt(y)||Bo(y))return!1;var x=xr(y)?Ie:F;return x.test(Vo(y))}function To(y){return Ot(y)&&jn(y.length)&&!!W[Yt(y)]}function Io(y){if(!dt(y))return $o(y);var x=Dn(y),$=[];for(var de in y)de=="constructor"&&(x||!we.call(y,de))||$.push(de);return $}function xn(y,x,$,de,_e){y!==x&&Ao(x,function(me,Ee){if(_e||(_e=new Je),dt(me))Oo(y,x,Ee,$,xn,de,_e);else{var ye=de?de(Nr(y,Ee),me,Ee+"",y,x,_e):void 0;ye===void 0&&(ye=me),Tr(y,Ee,ye)}},Fn)}function Oo(y,x,$,de,_e,me,Ee){var ye=Nr(y,$),Ae=Nr(x,$),Ge=Ee.get(Ae);if(Ge){Tr(y,$,Ge);return}var Fe=me?me(ye,Ae,$+"",y,x,Ee):void 0,Nt=Fe===void 0;if(Nt){var Mr=Pr(Ae),Dr=!Mr&&kn(Ae),qn=!Mr&&!Dr&&Wn(Ae);Fe=Ae,Mr||Dr||qn?Pr(ye)?Fe=ye:Jo(ye)?Fe=Mo(ye):Dr?(Nt=!1,Fe=Po(Ae)):qn?(Nt=!1,Fe=xo(Ae)):Fe=[]:Yo(Ae)||Cr(Ae)?(Fe=ye,Cr(ye)?Fe=Xo(ye):(!dt(ye)||xr(ye))&&(Fe=Fo(Ae))):Nt=!1}Nt&&(Ee.set(Ae,Fe),_e(Fe,Ae,de,me,Ee),Ee.delete(Ae)),Tr(y,$,Fe)}function No(y,x){return Go(zo(y,x,Un),y+"")}var Co=yt?function(y,x){return yt(y,"toString",{configurable:!0,enumerable:!1,value:Zo(x),writable:!0})}:Un;function Po(y,x){return y.slice()}function Lo(y){var x=new y.constructor(y.byteLength);return new ft(x).set(new ft(y)),x}function xo(y,x){var $=Lo(y.buffer);return new y.constructor($,y.byteOffset,y.length)}function Mo(y,x){var $=-1,de=y.length;for(x||(x=Array(de));++$<de;)x[$]=y[$];return x}function Do(y,x,$,de){var _e=!$;$||($={});for(var me=-1,Ee=x.length;++me<Ee;){var ye=x[me],Ae=void 0;Ae===void 0&&(Ae=y[ye]),_e?Ir($,ye,Ae):Eo($,ye,Ae)}return $}function ko(y){return No(function(x,$){var de=-1,_e=$.length,me=_e>1?$[_e-1]:void 0,Ee=_e>2?$[2]:void 0;for(me=y.length>3&&typeof me=="function"?(_e--,me):void 0,Ee&&Uo($[0],$[1],Ee)&&(me=_e<3?void 0:me,_e=1),x=Object(x);++de<_e;){var ye=$[de];ye&&y(x,ye,de,me)}return x})}function jo(y){return function(x,$,de){for(var _e=-1,me=Object(x),Ee=de(x),ye=Ee.length;ye--;){var Ae=Ee[++_e];if($(me[Ae],Ae,me)===!1)break}return x}}function Xt(y,x){var $=y.__data__;return qo(x)?$[typeof x=="string"?"string":"hash"]:$.map}function Or(y,x){var $=ne(y,x);return Ro($)?$:void 0}function Wo(y){var x=we.call(y,Xe),$=y[Xe];try{y[Xe]=void 0;var de=!0}catch{}var _e=be.call(y);return de&&(x?y[Xe]=$:delete y[Xe]),_e}function Fo(y){return typeof y.constructor=="function"&&!Dn(y)?At(Le(y)):{}}function Mn(y,x){var $=typeof y;return x=x??s,!!x&&($=="number"||$!="symbol"&&Y.test(y))&&y>-1&&y%1==0&&y<x}function Uo(y,x,$){if(!dt($))return!1;var de=typeof x;return(de=="number"?Lr($)&&Mn(x,$.length):de=="string"&&x in $)?Qt($[x],y):!1}function qo(y){var x=typeof y;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?y!=="__proto__":y===null}function Bo(y){return!!Ce&&Ce in y}function Dn(y){var x=y&&y.constructor,$=typeof x=="function"&&x.prototype||J;return y===$}function $o(y){var x=[];if(y!=null)for(var $ in Object(y))x.push($);return x}function Ho(y){return be.call(y)}function zo(y,x,$){return x=Et(x===void 0?y.length-1:x,0),function(){for(var de=arguments,_e=-1,me=Et(de.length-x,0),Ee=Array(me);++_e<me;)Ee[_e]=de[x+_e];_e=-1;for(var ye=Array(x+1);++_e<x;)ye[_e]=de[_e];return ye[x]=$(Ee),N(y,this,ye)}}function Nr(y,x){if(!(x==="constructor"&&typeof y[x]=="function")&&x!="__proto__")return y[x]}var Go=Ko(Co);function Ko(y){var x=0,$=0;return function(){var de=Bt(),_e=c-(de-$);if($=de,_e>0){if(++x>=o)return arguments[0]}else x=0;return y.apply(void 0,arguments)}}function Vo(y){if(y!=null){try{return K.call(y)}catch{}try{return y+""}catch{}}return""}function Qt(y,x){return y===x||y!==y&&x!==x}var Cr=Ln((function(){return arguments})())?Ln:function(y){return Ot(y)&&we.call(y,"callee")&&!Sr.call(y,"callee")},Pr=Array.isArray;function Lr(y){return y!=null&&jn(y.length)&&!xr(y)}function Jo(y){return Ot(y)&&Lr(y)}var kn=Er||es;function xr(y){if(!dt(y))return!1;var x=Yt(y);return x==U||x==B||x==T||x==S}function jn(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=s}function dt(y){var x=typeof y;return y!=null&&(x=="object"||x=="function")}function Ot(y){return y!=null&&typeof y=="object"}function Yo(y){if(!Ot(y)||Yt(y)!=f)return!1;var x=Le(y);if(x===null)return!0;var $=we.call(x,"constructor")&&x.constructor;return typeof $=="function"&&$ instanceof $&&K.call($)==xe}var Wn=ce?q(ce):To;function Xo(y){return Do(y,Fn(y))}function Fn(y){return Lr(y)?So(y):Io(y)}var Qo=ko(function(y,x,$){xn(y,x,$)});function Zo(y){return function(){return y}}function Un(y){return y}function es(){return!1}r.exports=Qo})(xt,xt.exports)),xt.exports}Ds();var fr={exports:{}},ks=fr.exports,Wi;function js(){return Wi||(Wi=1,(function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(ks,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],c={},s=null;function _(C,A){var u=C[A];if(typeof u.bind=="function")return u.bind(C);try{return Function.prototype.bind.call(u,C)}catch{return function(){return Function.prototype.apply.apply(u,[C,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function T(C){return C==="debug"&&(C="log"),typeof console===t?!1:C==="trace"&&n?O:console[C]!==void 0?_(console,C):console.log!==void 0?_(console,"log"):e}function D(){for(var C=this.getLevel(),A=0;A<o.length;A++){var u=o[A];this[u]=A<C?e:this.methodFactory(u,C,this.name)}if(this.log=this.debug,typeof console===t&&C<this.levels.SILENT)return"No console available for logging"}function k(C){return function(){typeof console!==t&&(D.call(this),this[C].apply(this,arguments))}}function m(C,A,u){return T(C)||k.apply(this,arguments)}function U(C,A){var u=this,f,S,z,G="loglevel";typeof C=="string"?G+=":"+C:typeof C=="symbol"&&(G=void 0);function se(d){var h=(o[d]||"silent").toUpperCase();if(!(typeof window===t||!G)){try{window.localStorage[G]=h;return}catch{}try{window.document.cookie=encodeURIComponent(G)+"="+h+";"}catch{}}}function he(){var d;if(!(typeof window===t||!G)){try{d=window.localStorage[G]}catch{}if(typeof d===t)try{var h=window.document.cookie,l=encodeURIComponent(G),I=h.indexOf(l+"=");I!==-1&&(d=/^([^;]+)/.exec(h.slice(I+l.length+1))[1])}catch{}return u.levels[d]===void 0&&(d=void 0),d}}function i(){if(!(typeof window===t||!G)){try{window.localStorage.removeItem(G)}catch{}try{window.document.cookie=encodeURIComponent(G)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function g(d){var h=d;if(typeof h=="string"&&u.levels[h.toUpperCase()]!==void 0&&(h=u.levels[h.toUpperCase()]),typeof h=="number"&&h>=0&&h<=u.levels.SILENT)return h;throw new TypeError("log.setLevel() called with invalid level: "+d)}u.name=C,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=A||m,u.getLevel=function(){return z??S??f},u.setLevel=function(d,h){return z=g(d),h!==!1&&se(z),D.call(u)},u.setDefaultLevel=function(d){S=g(d),he()||u.setLevel(d,!1)},u.resetLevel=function(){z=null,i(),D.call(u)},u.enableAll=function(d){u.setLevel(u.levels.TRACE,d)},u.disableAll=function(d){u.setLevel(u.levels.SILENT,d)},u.rebuild=function(){if(s!==u&&(f=g(s.getLevel())),D.call(u),s===u)for(var d in c)c[d].rebuild()},f=g(s?s.getLevel():"WARN");var a=he();a!=null&&(z=g(a)),D.call(u)}s=new U,s.getLogger=function(A){if(typeof A!="symbol"&&typeof A!="string"||A==="")throw new TypeError("You must supply a name when creating a logger.");var u=c[A];return u||(u=c[A]=new U(A,s.methodFactory)),u};var B=typeof window!==t?window.log:void 0;return s.noConflict=function(){return typeof window!==t&&window.log===s&&(window.log=B),s},s.getLoggers=function(){return c},s.default=s,s})})(fr)),fr.exports}var go=js();const dr=vt(go),Ws=dr.getLogger("http-helpers");Ws.setLevel(go.levels.INFO);function Fs(r){let e=r;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const En={},An={};for(let r=0;r<16;r++){const e=r,t=r*16,n=r.toString(16).toLowerCase();An[n]=e,An[n.toUpperCase()]=e,En[n]=t,En[n.toUpperCase()]=t}function Us(r){const e=r.length,t=new Uint8Array(e/2);for(let n=0;n<e;n+=2)t[n/2]=En[r[n]]+An[r[n+1]];return t}Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));for(let r=0;r<=256*256-1;r++)BigInt(r);const yr=r=>{if(typeof r!="string")throw new Error(`hex argument type ${typeof r} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(r))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${r}`);const e=r.slice(2);return Us(e.length%2===0?e:Fs(e))},qs=r=>{if(!Number.isSafeInteger(r)||r<0)throw new Error(`Received an invalid integer type: ${r}`);return`0x${r.toString(16)}`},Ft=r=>{const e=qs(r);return yr(e)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");eo.CURVE.n;eo.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Bs="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";yr(Bs);const $s="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";yr($s);const Hs="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";yr(Hs);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));var Fi;(function(r){r.String="string",r.Bytes="view",r.Number="number"})(Fi||(Fi={}));var Ui;(function(r){r.String="string",r.Bytes="view",r.JSON="json"})(Ui||(Ui={}));var qi;(function(r){r[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"})(qi||(qi={}));var Bi;(function(r){r[r.Deposit=0]="Deposit",r[r.Withdrawal=1]="Withdrawal",r[r.Consolidation=2]="Consolidation"})(Bi||(Bi={}));var wt;(function(r){r[r.Version=0]="Version",r[r.Balance=1]="Balance",r[r.Nonce=2]="Nonce",r[r.CodeHash=3]="CodeHash",r[r.CodeSize=4]="CodeSize"})(wt||(wt={}));Ft(wt.Version);Ft(wt.Balance);Ft(wt.Nonce);Ft(wt.CodeHash);Ft(wt.CodeSize);BigInt(256)**BigInt(31);var wn={exports:{}},or={},sr={},$i;function zs(){if($i)return sr;$i=1,Object.defineProperty(sr,"__esModule",{value:!0});function r(e){var t=4,n=e.length,o=n%t;if(!o)return e;var c=n,s=t-o,_=n+s,O=Ve.alloc(_);for(O.write(e);s--;)O.write("=",c++);return O.toString()}return sr.default=r,sr}var Hi;function Gs(){if(Hi)return or;Hi=1,Object.defineProperty(or,"__esModule",{value:!0});var r=zs();function e(_,O){return O===void 0&&(O="utf8"),Ve.isBuffer(_)?o(_.toString("base64")):o(Ve.from(_,O).toString("base64"))}function t(_,O){return O===void 0&&(O="utf8"),Ve.from(n(_),"base64").toString(O)}function n(_){return _=_.toString(),r.default(_).replace(/\-/g,"+").replace(/_/g,"/")}function o(_){return _.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c(_){return Ve.from(n(_),"base64")}var s=e;return s.encode=e,s.decode=t,s.toBase64=n,s.fromBase64=o,s.toBuffer=c,or.default=s,or}var zi;function Ks(){return zi||(zi=1,(function(r){r.exports=Gs().default,r.exports.default=r.exports})(wn)),wn.exports}Ks();const Se={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},at={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.AQUA+"",at.SAPPHIRE_MAINNET,Se.CELESTE+"",at.SAPPHIRE_MAINNET,Se.CYAN+"",at.SAPPHIRE_MAINNET,Se.MAINNET+"",at.SAPPHIRE_MAINNET,Se.TESTNET+"",at.SAPPHIRE_DEVNET;Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";at.SAPPHIRE_MAINNET+"",at.SAPPHIRE_DEVNET+"",Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";Se.MAINNET+"",Se.TESTNET+"",Se.CYAN+"",Se.AQUA+"",Se.CELESTE+"";function Gi(r){let e=!1,t=0,n;try{n=window[r],e=!0,t=n.length;const o="__storage_test__";return n.setItem(o,o),n.removeItem(o),!0}catch(o){const c=o;return c&&(c.code===22||c.code===1014||c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&t!==0}}class Vs{constructor(){ge(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}class Js{constructor(e,t){ge(this,"storage",void 0),ge(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch{}}static getInstance(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(e)){let n;t==="local"&&Gi("localStorage")?n=window.localStorage:t==="session"&&Gi("sessionStorage")?n=window.sessionStorage:n=new Vs,this.instanceMap.set(e,new this(e,n))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const n=JSON.parse(this.storage.getItem(this._storeKey)||"{}");n[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(n))}}ge(Js,"instanceMap",new Map);$e($e({},at),Se);class Ys extends Error{}Ys.prototype.name="InvalidTokenError";const ar={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},rt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},Xs={GET_PROVIDER_STATE:"wallet_get_provider_state"},_n={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Qs(r){return function(t,n,o){o(c=>{n.error&&dr.warn(`Error in RPC response:
`,n),!t.isTorusInternal&&(dr.info(`RPC (${r.origin}):`,t,"->",n),c())})}}var bn={},gt={},Ki;function Nn(){if(Ki)return gt;Ki=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.EthereumProviderError=gt.EthereumRpcError=void 0;const r=uo();class e extends Error{constructor(s,_,O){if(!Number.isInteger(s))throw new Error('"code" must be an integer.');if(!_||typeof _!="string")throw new Error('"message" must be a nonempty string.');super(_),this.code=s,O!==void 0&&(this.data=O)}serialize(){const s={code:this.code,message:this.message};return this.data!==void 0&&(s.data=this.data),this.stack&&(s.stack=this.stack),s}toString(){return r.default(this.serialize(),o,2)}}gt.EthereumRpcError=e;class t extends e{constructor(s,_,O){if(!n(s))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(s,_,O)}}gt.EthereumProviderError=t;function n(c){return Number.isInteger(c)&&c>=1e3&&c<=4999}function o(c,s){if(s!=="[Circular]")return s}return gt}var yn={},pt={},Vi;function Cn(){return Vi||(Vi=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.errorValues=pt.errorCodes=void 0,pt.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},pt.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}),pt}var Ji;function po(){return Ji||(Ji=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.serializeError=r.isValidCode=r.getMessageFromCode=r.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Cn(),t=Nn(),n=e.errorCodes.rpc.internal,o="Unspecified error message. This is a bug, please report it.",c={code:n,message:s(n)};r.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function s(m,U=o){if(Number.isInteger(m)){const B=m.toString();if(k(e.errorValues,B))return e.errorValues[B].message;if(T(m))return r.JSON_RPC_SERVER_ERROR_MESSAGE}return U}r.getMessageFromCode=s;function _(m){if(!Number.isInteger(m))return!1;const U=m.toString();return!!(e.errorValues[U]||T(m))}r.isValidCode=_;function O(m,{fallbackError:U=c,shouldIncludeStack:B=!1}={}){var C,A;if(!U||!Number.isInteger(U.code)||typeof U.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(m instanceof t.EthereumRpcError)return m.serialize();const u={};if(m&&typeof m=="object"&&!Array.isArray(m)&&k(m,"code")&&_(m.code)){const S=m;u.code=S.code,S.message&&typeof S.message=="string"?(u.message=S.message,k(S,"data")&&(u.data=S.data)):(u.message=s(u.code),u.data={originalError:D(m)})}else{u.code=U.code;const S=(C=m)===null||C===void 0?void 0:C.message;u.message=S&&typeof S=="string"?S:U.message,u.data={originalError:D(m)}}const f=(A=m)===null||A===void 0?void 0:A.stack;return B&&m&&f&&typeof f=="string"&&(u.stack=f),u}r.serializeError=O;function T(m){return m>=-32099&&m<=-32e3}function D(m){return m&&typeof m=="object"&&!Array.isArray(m)?Object.assign({},m):m}function k(m,U){return Object.prototype.hasOwnProperty.call(m,U)}})(yn)),yn}var Lt={},Yi;function Zs(){if(Yi)return Lt;Yi=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.ethErrors=void 0;const r=Nn(),e=po(),t=Cn();Lt.ethErrors={rpc:{parse:s=>n(t.errorCodes.rpc.parse,s),invalidRequest:s=>n(t.errorCodes.rpc.invalidRequest,s),invalidParams:s=>n(t.errorCodes.rpc.invalidParams,s),methodNotFound:s=>n(t.errorCodes.rpc.methodNotFound,s),internal:s=>n(t.errorCodes.rpc.internal,s),server:s=>{if(!s||typeof s!="object"||Array.isArray(s))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:_}=s;if(!Number.isInteger(_)||_>-32005||_<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return n(_,s)},invalidInput:s=>n(t.errorCodes.rpc.invalidInput,s),resourceNotFound:s=>n(t.errorCodes.rpc.resourceNotFound,s),resourceUnavailable:s=>n(t.errorCodes.rpc.resourceUnavailable,s),transactionRejected:s=>n(t.errorCodes.rpc.transactionRejected,s),methodNotSupported:s=>n(t.errorCodes.rpc.methodNotSupported,s),limitExceeded:s=>n(t.errorCodes.rpc.limitExceeded,s)},provider:{userRejectedRequest:s=>o(t.errorCodes.provider.userRejectedRequest,s),unauthorized:s=>o(t.errorCodes.provider.unauthorized,s),unsupportedMethod:s=>o(t.errorCodes.provider.unsupportedMethod,s),disconnected:s=>o(t.errorCodes.provider.disconnected,s),chainDisconnected:s=>o(t.errorCodes.provider.chainDisconnected,s),custom:s=>{if(!s||typeof s!="object"||Array.isArray(s))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:_,message:O,data:T}=s;if(!O||typeof O!="string")throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(_,O,T)}}};function n(s,_){const[O,T]=c(_);return new r.EthereumRpcError(s,O||e.getMessageFromCode(s),T)}function o(s,_){const[O,T]=c(_);return new r.EthereumProviderError(s,O||e.getMessageFromCode(s),T)}function c(s){if(s){if(typeof s=="string")return[s];if(typeof s=="object"&&!Array.isArray(s)){const{message:_,data:O}=s;if(_&&typeof _!="string")throw new Error("Must specify string message.");return[_||void 0,O]}}return[]}return Lt}var Xi;function ea(){return Xi||(Xi=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getMessageFromCode=r.serializeError=r.EthereumProviderError=r.EthereumRpcError=r.ethErrors=r.errorCodes=void 0;const e=Nn();Object.defineProperty(r,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(r,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const t=po();Object.defineProperty(r,"serializeError",{enumerable:!0,get:function(){return t.serializeError}}),Object.defineProperty(r,"getMessageFromCode",{enumerable:!0,get:function(){return t.getMessageFromCode}});const n=Zs();Object.defineProperty(r,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const o=Cn();Object.defineProperty(r,"errorCodes",{enumerable:!0,get:function(){return o.errorCodes}})})(bn)),bn}var lt=ea(),mn,Qi;function ta(){return Qi||(Qi=1,mn=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,c;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(c=Object.keys(e),n=c.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[o]))return!1;for(o=n;o--!==0;){var s=c[o];if(!r(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),mn}var ra=ta();const na=vt(ra);var ia="2.1.0";function wo(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}function oa(r){return wo(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object"}function sa(r){return wo(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object"}function aa(r){return oa(r)&&sa(r)}var Ye={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:r=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${r} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:r=>`Invalid options. Received: { maxEventListeners: ${r}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:r=>`'args.logger' must include required method '${r}'.`},info:{connected:r=>`Torus: Connected to chain with ID "${r}".`}};const la={PRODUCTION:"production"},Mt={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},ua={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Pn={translations:ua,localStorageKeyPrefix:"torus-"},ve=dr.getLogger("solana-embed");function fa(){return(r,e,t)=>{(typeof r.method!="string"||!r.method)&&(e.error=lt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:r})),t(n=>{const{error:o}=e;return o&&ve.error(`Torus - RPC Error: ${o.message}`,o),n()})}}function ca(r,e,t){let n=`Torus: Lost connection to "${r}".`;e?.stack&&(n+=`
${e.stack}`),ve.warn(n),t&&t.listenerCount("error")>0&&t.emit("error",n)}const lr=()=>Math.random().toString(36).slice(2),_o=async r=>{let e,t;switch(r){case"testing":e="https://solana-testing.tor.us",t="debug";break;case"development":e="http://localhost:8080",t="debug";break;default:e="https://solana.tor.us",t="error";break}return{torusUrl:e,logLevel:t}},da=()=>{let r=window.navigator.language||"en-US";const e=r.split("-");return r=Object.prototype.hasOwnProperty.call(Pn.translations,e[0])?e[0]:"en",r},ha={height:660,width:375},ga={height:740,width:1315},pa={height:700,width:1200},bo={height:600,width:400};function wa(r){let e;try{e=window[r];const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){const n=t;return n&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function Dt(r){let{width:e,height:t}=r;const n=window.screenLeft!==void 0?window.screenLeft:window.screenX,o=window.screenTop!==void 0?window.screenTop:window.screenY,c=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,_=1,O=Math.abs((c-e)/2/_+n),T=Math.abs((s-t)/2/_+o);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${t/_},width=${e/_},top=${T},left=${O}`}class yo extends br{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;if(super(),ge(this,"isTorus",void 0),ge(this,"_rpcEngine",void 0),ge(this,"jsonRpcConnectionEvents",void 0),ge(this,"_state",void 0),!aa(e))throw new Error(Ye.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(n),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const c=new xs;Ri(e,c,e,this._handleStreamDisconnect.bind(this,"Torus")),c.ignoreStream("phishing");const s=Cs();Ri(s.stream,c.createStream(o),s.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const _=new tt;_.push(Ps()),_.push(fa()),_.push(Qs({origin:location.origin})),_.push(s.middleware),this._rpcEngine=_,this.jsonRpcConnectionEvents=s.events}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw lt.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestArgs(),data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw lt.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestMethod(),data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw lt.ethErrors.rpc.invalidRequest({message:Ye.errors.invalidRequestParams(),data:e});return new Promise((o,c)=>{this._rpcRequest({method:t,params:n},Sn(o,c))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,n)=>{this._rpcRequest(e,Sn(t,n))})}_handleStreamDisconnect(e,t){ca(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const mt=r=>{const e=window.document.createElement("template"),t=r.trim();return e.innerHTML=t,e.content.firstChild};function ur(r){return r.version===void 0}class mo extends br{constructor(e){let{url:t,target:n,features:o,timeout:c=3e4}=e;super(),ge(this,"url",void 0),ge(this,"target",void 0),ge(this,"features",void 0),ge(this,"window",void 0),ge(this,"windowTimer",void 0),ge(this,"iClosedWindow",void 0),ge(this,"timeout",void 0),this.url=t,this.target=n||"_blank",this.features=o||Dt(pa),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=c,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){return this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class mr extends yo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"embedTranslations",void 0),ge(this,"torusUrl",void 0),ge(this,"dappStorageKey",void 0),ge(this,"windowRefs",void 0),ge(this,"tryWindowHandle",void 0),ge(this,"torusAlertContainer",void 0),ge(this,"torusIframe",void 0),this._state=$e({},mr._defaultState),this.torusUrl="",this.dappStorageKey="";const c=Pn.translations[da()];this.embedTranslations=c.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const s=_=>{const{method:O,params:T}=_;if(O===ar.IFRAME_STATUS){const{isFullScreen:D,rid:k}=T;this._displayIframe({isFull:D,rid:k})}else if(O==="create_window"){const{windowId:D,url:k}=T;this._createPopupBlockAlert(D,k)}else if(O===ar.CLOSE_WINDOW)this._handleCloseWindow(T);else if(O===ar.USER_LOGGED_IN){const{currentLoginProvider:D}=T;this._state.isLoggedIn=!0,this._state.currentLoginProvider=D}else O===ar.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",s)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:n,torusAlertContainer:o,torusIframe:c}=e;this.torusUrl=t,this.dappStorageKey=n,this.torusAlertContainer=o,this.torusIframe=c,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:s,isLoggedIn:_}=await this.request({method:rt.GET_PROVIDER_STATE,params:[]});this._handleConnect(s,_)}catch(t){ve.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{ve.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:n,features:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(c.hash?c.hash+=`&dappStorageKey=${this.dappStorageKey}`:c.hash=`#dappStorageKey=${this.dappStorageKey}`);const s=new mo({url:c,target:n,features:o});if(s.open(),!s.window){this._createPopupBlockAlert(e,c.href);return}this.windowRefs[e]=s,this.request({method:"opened_window",params:{windowId:e}}),s.once("close",()=>{delete this.windowRefs[e],this.request({method:rt.CLOSED_WINDOW,params:{windowId:e}})})}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={};if(e)n.display="block",n.width="100%",n.height="100%",n.top="0px",n.right="0px",n.left="0px",n.bottom="0px";else switch(n.display=this._state.torusWidgetVisibility?"block":"none",n.height="70px",n.width="70px",this._state.buttonPosition){case Mt.TOP_LEFT:n.top="0px",n.left="0px",n.right="auto",n.bottom="auto";break;case Mt.TOP_RIGHT:n.top="0px",n.right="0px",n.left="auto",n.bottom="auto";break;case Mt.BOTTOM_RIGHT:n.bottom="0px",n.right="0px",n.top="auto",n.left="auto";break;case Mt.BOTTOM_LEFT:default:n.bottom="0px",n.left="0px",n.top="auto",n.right="auto";break}Object.assign(this.torusIframe.style,n),this._state.isIFrameFullScreen=e,this.request({method:rt.IFRAME_STATUS,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const n=t,o=e;Array.isArray(o)||o.jsonrpc||(o.jsonrpc="2.0"),this.tryWindowHandle(o,n)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),ve.debug(Ye.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new lt.EthereumRpcError(1013,t||Ye.errors.disconnected()),ve.debug(n)):(n=new lt.EthereumRpcError(1011,t||Ye.errors.permanentlyDisconnected()),ve.error(n),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const n=this.getLogoUrl(),o=mt(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${n}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),c=mt(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),s=mt('<div id="torusAlert__btn-container"></div>');s.appendChild(c),o.appendChild(s);const _=()=>{c.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:Dt(bo)}),o.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(o)})(),_(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ge(mr,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class vr extends yo{constructor(e,t){let{maxEventListeners:n=100,jsonRpcStreamName:o="provider"}=t;super(e,{maxEventListeners:n,jsonRpcStreamName:o}),ge(this,"chainId",void 0),ge(this,"selectedAddress",void 0),ge(this,"tryWindowHandle",void 0),this._state=$e({},vr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const c=s=>{const{method:_,params:O}=s;_===_n.ACCOUNTS_CHANGED?this._handleAccountsChanged(O):_===_n.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(O):_===_n.CHAIN_CHANGED&&this._handleChainChanged(O)};this.jsonRpcConnectionEvents.on("notification",c)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:n}=await this.request({method:Xs.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:n}),this._handleAccountsChanged(e)}catch(e){ve.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{ve.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=t;const c=e;if(!Array.isArray(c)){if(c.jsonrpc||(c.jsonrpc="2.0"),c.method==="solana_accounts"||c.method==="solana_requestAccounts")o=(s,_)=>{this._handleAccountsChanged(_.result||[],c.method==="solana_accounts",n),t(s,_)};else if(c.method==="wallet_getProviderState"){this._rpcEngine.handle(e,o);return}}this.tryWindowHandle(c,o)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),ve.debug(Ye.info.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){this._state.isConnected=!1;let n;e?(n=new lt.EthereumRpcError(1013,t||Ye.errors.disconnected()),ve.debug(n)):(n=new lt.EthereumRpcError(1011,t||Ye.errors.permanentlyDisconnected()),ve.error(n),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n)}}_handleAccountsChanged(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=e;Array.isArray(o)||(ve.error("Torus: Received non-array accounts parameter. Please report this bug.",o),o=[]);for(const c of e)if(typeof c!="string"){ve.error("Torus: Received non-string account. Please report this bug.",e),o=[];break}na(this._state.accounts,o)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!n&&ve.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',o),this._state.accounts=o,this.emit("accountsChanged",o)),this.selectedAddress!==o[0]&&(this.selectedAddress=o[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!e){ve.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e});return}e==="loading"?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof t!="boolean"){ve.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t});return}t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[]))}}ge(vr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function Zi(r){return new Promise((e,t)=>{try{const n=document.createElement("img");n.onload=()=>e(!0),n.onerror=()=>e(!1),n.src=r}catch(n){t(n)}})}const _a=r=>{const{document:e}=r,t=e.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const n=e.querySelector('head > meta[name="title"]');return n?n.content:e.title&&e.title.length>0?e.title:r.location.hostname};async function ba(r){try{const{document:e}=r;let t=e.querySelector('head > link[rel="shortcut icon"]');return t&&await Zi(t.href)||(t=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(n=>!!n.href),t&&await Zi(t.href))?t.href:""}catch{return""}}const ya=async()=>({name:_a(window),icon:await ba(window)}),ma=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],va=[rt.SET_PROVIDER],Sa=wa("localStorage");(async function(){try{if(typeof document>"u")return;const e=document.createElement("link"),{torusUrl:t}=await _o("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){ve.warn(e)}})();class Ra{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(this,"isInitialized",void 0),ge(this,"torusAlert",void 0),ge(this,"modalZIndex",void 0),ge(this,"alertZIndex",void 0),ge(this,"requestedLoginProvider",void 0),ge(this,"provider",void 0),ge(this,"communicationProvider",void 0),ge(this,"dappStorageKey",void 0),ge(this,"isTopupHidden",!1),ge(this,"torusAlertContainer",void 0),ge(this,"torusUrl",void 0),ge(this,"torusIframe",void 0),ge(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:e=la.PRODUCTION,enableLogging:t=!1,network:n,showTorusButton:o=!1,useLocalStorage:c=!1,buttonPosition:s=Mt.BOTTOM_LEFT,apiKey:_="torus-default",extraParams:O={},whiteLabel:T}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:D,logLevel:k}=await _o(e);ve.enableAll(),ve.info(D,"url loaded"),ve.info(`Solana Embed Version :${ia}`),this.torusUrl=D,ve.setDefaultLevel(k),t?ve.enableAll():ve.disableAll();const m=this.handleDappStorageKey(c),U=new URL(D);U.pathname.endsWith("/")?U.pathname+="frame":U.pathname+="/frame";const B=new URLSearchParams;return m&&B.append("dappStorageKey",m),B.append("origin",window.location.origin),U.hash=B.toString(),this.torusIframe=mt(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${U.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=mt(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=mt(`<link href="${D}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((C,A)=>{try{this.torusIframe.addEventListener("load",async()=>{const u=await ya();this.torusIframe.contentWindow.postMessage({buttonPosition:s,apiKey:_,network:n,dappMetadata:u,extraParams:O,whiteLabel:T},U.origin),await this._setupWeb3({torusUrl:D}),o&&this.showTorusButton(),T?.topupHide?this.isTopupHidden=T.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,C()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(u){A(u)}})}async login(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((n,o)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Sn(n,o))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw ve.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:n}=e,{success:o}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:n}});if(!o)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:rt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(t){return t instanceof Element||t instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:rt.SET_PROVIDER,params:$e({},e)})}async showWallet(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=await this.communicationProvider.request({method:rt.WALLET_INSTANCE_ID,params:[]}),o=e?`/${e}`:"",c=new URL(`${this.torusUrl}/wallet${o}`);c.searchParams.append("instanceId",n),Object.keys(t).forEach(_=>{c.searchParams.append(_,t[_])}),this.dappStorageKey&&(c.hash=`#dappStorageKey=${this.dappStorageKey}`),new mo({url:c,features:Dt(ga)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:rt.USER_INFO,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const n=lr();return this.communicationProvider._handleWindow(n),await this.communicationProvider.request({method:rt.TOPUP,params:{provider:e,params:t,windowId:n}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=ur(e),n=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Ve.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:n,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const n=ur(e),o=n?e.serialize({requireAllSignatures:!1}).toString("hex"):Ve.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:o,options:t,isLegacyTransaction:n}})}}async signTransaction(e){const t=ur(e),n=t?e.serializeMessage().toString("hex"):Ve.from(e.message.serialize()).toString("hex"),o=await this.provider.request({method:"sign_transaction",params:{message:n,messageOnly:!0,isLegacyTransaction:t}}),c=JSON.parse(o),s={publicKey:new Bn(c.publicKey),signature:Ve.from(c.signature,"hex")};return e.addSignature(s.publicKey,s.signature),e}async signAllTransactions(e){let t;const n=e.map(s=>(t=ur(s),t?s.serializeMessage().toString("hex"):Ve.from(s.message.serialize()).toString("hex"))),c=(await this.provider.request({method:"sign_all_transactions",params:{message:n,messageOnly:!0,isLegacyTransaction:t}})).map(s=>{const _=JSON.parse(s);return{publicKey:new Bn(_.publicKey),signature:Ve.from(_.signature,"hex")}});return e.forEach((s,_)=>(s.addSignature(c[_].publicKey,c[_].signature),s)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${Pn.localStorageKeyPrefix}${window.location.hostname}`;let n="";if(Sa&&e){const o=window.localStorage.getItem(t);if(o)n=o;else{const c=`torus-app-${lr()}`;window.localStorage.setItem(t,c),n=c}}return this.dappStorageKey=n,n}async _setupWeb3(e){ve.info("setupWeb3 running");const t=new Oi({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),n=new Oi({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),o=new vr(t,{}),c=new mr(n,{});o.tryWindowHandle=(T,D)=>{const k=T;if(!Array.isArray(k)&&ma.includes(k.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const m=lr();c._handleWindow(m,{target:"_blank",features:Dt(bo)}),k.windowId=m}o._rpcEngine.handle(k,D)},c.tryWindowHandle=(T,D)=>{const k=T;if(!Array.isArray(k)&&va.includes(k.method)){const m=lr();c._handleWindow(m,{target:"_blank",features:Dt(ha)}),k.params.windowId=m}c._rpcEngine.handle(k,D)};const s=T=>{const D=o[T],k=this;o[T]=function(U,B){const{method:C,params:A=[]}=U;if(C==="solana_requestAccounts"){if(!B)return k.login({loginProvider:A[0]});k.login({loginProvider:A[0]}).then(u=>B(null,u)).catch(u=>B(u))}return D.apply(this,[U,B])}};s("request"),s("sendAsync"),s("send");const _=new Proxy(o,{deleteProperty:()=>!0}),O=new Proxy(c,{deleteProperty:()=>!0});this.provider=_,this.communicationProvider=O,await Promise.all([o._initializeState(),c._initializeState($e($e({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),ve.debug("Torus - injected provider")}}export{Mt as BUTTON_POSITION,la as TORUS_BUILD_ENV,vr as TorusInPageProvider,Ra as default};
